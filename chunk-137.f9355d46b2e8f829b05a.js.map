{"version":3,"file":"chunk-137.f9355d46b2e8f829b05a.js","mappings":"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","sources":["webpack://hopital-availabilty-frontend/./src/components/Chat/lib/arraybuffer.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/lib/bootstrap.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/lib/bundle.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/lib/connection.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/lib/device.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/lib/index.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/lib/omemo.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/lib/peer.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/lib/random.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/lib/stanza.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/lib/storage.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/lib/store.ts","webpack://hopital-availabilty-frontend/./src/components/Chat/Swiper.css","webpack://hopital-availabilty-frontend/./src/components/Chat/Swiper.css?3381"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ArrayBufferUtils = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar decoder = new TextDecoder(\"utf-8\");\nvar encoder = new TextEncoder();\n\nfunction bufferConcat() {\n  var length = 0;\n  var buffer = null;\n\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  for (var i in args) {\n    buffer = args[i];\n    length += buffer.byteLength;\n  }\n\n  var joined = new Uint8Array(length);\n  var offset = 0;\n\n  for (var _i in args) {\n    buffer = args[_i];\n    joined.set(new Uint8Array(buffer), offset);\n    offset += buffer.byteLength;\n  }\n\n  return joined.buffer;\n}\n\nvar chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"; // Use a lookup table to find the index.\n\nvar lookup = new Uint8Array(256);\n\nfor (var i = 0; i < chars.length; i++) {\n  lookup[chars.charCodeAt(i)] = i;\n}\n\nvar Base64ArrayBuffer = /*#__PURE__*/function () {\n  function Base64ArrayBuffer() {\n    (0, _classCallCheck2.default)(this, Base64ArrayBuffer);\n  }\n\n  (0, _createClass2.default)(Base64ArrayBuffer, null, [{\n    key: \"encode\",\n    value: function encode(arraybuffer) {\n      var bytes = new Uint8Array(arraybuffer),\n          len = bytes.length;\n      var i,\n          base64 = \"\";\n\n      for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];\n        base64 += chars[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];\n        base64 += chars[bytes[i + 2] & 63];\n      }\n\n      if (len % 3 === 2) base64 = base64.substring(0, base64.length - 1) + \"=\";else if (len % 3 === 1) base64 = base64.substring(0, base64.length - 2) + \"==\";\n      return base64;\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(base64) {\n      var len = base64.length;\n      var bufferLength = base64.length * 0.75,\n          i,\n          p = 0,\n          encoded1,\n          encoded2,\n          encoded3,\n          encoded4;\n\n      if (base64[base64.length - 1] === \"=\") {\n        bufferLength--;\n        if (base64[base64.length - 2] === \"=\") bufferLength--;\n      }\n\n      var arraybuffer = new ArrayBuffer(bufferLength),\n          bytes = new Uint8Array(arraybuffer);\n\n      for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = encoded1 << 2 | encoded2 >> 4;\n        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;\n        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;\n      }\n\n      return arraybuffer;\n    }\n  }]);\n  return Base64ArrayBuffer;\n}();\n\nvar ArrayBufferUtils = /*#__PURE__*/function () {\n  function ArrayBufferUtils() {\n    (0, _classCallCheck2.default)(this, ArrayBufferUtils);\n  }\n\n  (0, _createClass2.default)(ArrayBufferUtils, null, [{\n    key: \"concat\",\n    value: function concat(a, b) {\n      return bufferConcat(a, b);\n    }\n  }, {\n    key: \"decode\",\n    value: function decode(a) {\n      return decoder.decode(a);\n    }\n  }, {\n    key: \"encode\",\n    value: function encode(s) {\n      return encoder.encode(s); //@REVIEW returns Uint8Array  \n    }\n  }, {\n    key: \"toBase64\",\n    value: function toBase64(a) {\n      return a ? Base64ArrayBuffer.encode(a) : \"\";\n    }\n  }, {\n    key: \"fromBase64\",\n    value: function fromBase64(s) {\n      return Base64ArrayBuffer.decode(s);\n    }\n  }, {\n    key: \"toString\",\n    value: function toString(thing) {\n      if (typeof thing === \"string\") return thing; // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n\n      return new dcodeIO.ByteBuffer.wrap(thing).toString(\"binary\");\n    }\n  }, {\n    key: \"isEqual\",\n    value: function isEqual(a, b) {\n      // TODO: Special-case arraybuffers, etc\n      if (a === undefined || b === undefined) return false;\n      var as = ArrayBufferUtils.toString(a);\n      var bs = ArrayBufferUtils.toString(b);\n      var maxLength = Math.max(as.length, bs.length);\n      if (maxLength < 5) throw new Error(\"a/b compare too short\");\n      return as.substring(0, Math.min(maxLength, as.length)) === bs.substring(0, Math.min(maxLength, bs.length));\n    }\n  }, {\n    key: \"toArray\",\n    value: function toArray(a) {\n      return Array.apply([], new Uint8Array(a));\n    }\n  }, {\n    key: \"fromArray\",\n    value: function fromArray(a) {\n      return new Uint8Array(a).buffer;\n    }\n  }]);\n  return ArrayBufferUtils;\n}();\n\nexports.ArrayBufferUtils = ArrayBufferUtils;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bootstrap = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _random = require(\"./random\");\n\nvar _index = require(\"./index\");\n\nvar _bundle = require(\"./bundle\");\n\nvar Bootstrap = /*#__PURE__*/function () {\n  function Bootstrap(store, connection) {\n    (0, _classCallCheck2.default)(this, Bootstrap);\n    this.store = store;\n    this.connection = connection;\n  }\n\n  (0, _createClass2.default)(Bootstrap, [{\n    key: \"prepare\",\n    value: function () {\n      var _prepare = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        var bundle;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.store.isReady();\n\n              case 2:\n                if (_context.sent) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.next = 5;\n                return this.setup();\n\n              case 5:\n                _context.next = 7;\n                return this.store.isPublished();\n\n              case 7:\n                if (_context.sent) {\n                  _context.next = 22;\n                  break;\n                }\n\n                _context.next = 10;\n                return this.generateBundle();\n\n              case 10:\n                bundle = _context.sent;\n                _context.t0 = this.connection;\n                _context.next = 14;\n                return this.store.getDeviceId();\n\n              case 14:\n                _context.t1 = _context.sent;\n                _context.t2 = bundle.toObject();\n                _context.next = 18;\n                return _context.t0.publishBundle.call(_context.t0, _context.t1, _context.t2);\n\n              case 18:\n                _context.next = 20;\n                return this.store.put(\"published\", true);\n\n              case 20:\n                _context.next = 22;\n                return this.addDeviceIdToDeviceList();\n\n              case 22:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function prepare() {\n        return _prepare.apply(this, arguments);\n      }\n\n      return prepare;\n    }()\n  }, {\n    key: \"setup\",\n    value: function setup() {\n      var _this = this;\n\n      return Promise.all([this.generateDeviceId(), _index.KeyHelper.generateIdentityKeyPair(), _index.KeyHelper.generateRegistrationId()]).then( /*#__PURE__*/function () {\n        var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(_ref) {\n          var _ref3, deviceId, identityKey, registrationId;\n\n          return _regenerator.default.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _ref3 = (0, _slicedToArray2.default)(_ref, 3), deviceId = _ref3[0], identityKey = _ref3[1], registrationId = _ref3[2];\n                  _context2.next = 3;\n                  return _this.store.put(\"deviceId\", deviceId);\n\n                case 3:\n                  _context2.next = 5;\n                  return _this.store.put(\"identityKey\", identityKey);\n\n                case 5:\n                  _context2.next = 7;\n                  return _this.store.put(\"registrationId\", registrationId);\n\n                case 7:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"generateDeviceId\",\n    value: function generateDeviceId() {\n      return Promise.resolve(_random.Random.number(Math.pow(2, 31) - 1, 1));\n    }\n  }, {\n    key: \"generateBundle\",\n    value: function () {\n      var _generateBundle = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        var preKeyPromises, i, preKeys, identityKey;\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                console.debug(\"Generate OMEMO bundle\");\n                preKeyPromises = [];\n\n                for (i = 0; i < _index.NUM_PRE_KEYS; i++) {\n                  preKeyPromises.push(this.generatePreKey(i));\n                }\n\n                preKeyPromises.push(this.generateSignedPreKey(1));\n                _context3.next = 6;\n                return Promise.all(preKeyPromises);\n\n              case 6:\n                preKeys = _context3.sent;\n                _context3.next = 9;\n                return this.store.getIdentityKeyPair();\n\n              case 9:\n                identityKey = _context3.sent;\n                return _context3.abrupt(\"return\", new _bundle.Bundle({\n                  identityKey: identityKey,\n                  signedPreKey: preKeys.pop(),\n                  preKeys: preKeys\n                }));\n\n              case 11:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function generateBundle() {\n        return _generateBundle.apply(this, arguments);\n      }\n\n      return generateBundle;\n    }()\n  }, {\n    key: \"generatePreKey\",\n    value: function () {\n      var _generatePreKey = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(id) {\n        var preKey;\n        return _regenerator.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return _index.KeyHelper.generatePreKey(id);\n\n              case 2:\n                preKey = _context4.sent;\n                _context4.next = 5;\n                return this.store.storePreKey(id, preKey.keyPair);\n\n              case 5:\n                return _context4.abrupt(\"return\", preKey);\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function generatePreKey(_x2) {\n        return _generatePreKey.apply(this, arguments);\n      }\n\n      return generatePreKey;\n    }()\n  }, {\n    key: \"generateSignedPreKey\",\n    value: function () {\n      var _generateSignedPreKey = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(id) {\n        var identity, signedPreKey;\n        return _regenerator.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.store.getIdentityKeyPair();\n\n              case 2:\n                identity = _context5.sent;\n                _context5.next = 5;\n                return _index.KeyHelper.generateSignedPreKey(identity, id);\n\n              case 5:\n                signedPreKey = _context5.sent;\n                _context5.next = 8;\n                return this.store.storeSignedPreKey(id, signedPreKey.keyPair);\n\n              case 8:\n                return _context5.abrupt(\"return\", signedPreKey);\n\n              case 9:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function generateSignedPreKey(_x3) {\n        return _generateSignedPreKey.apply(this, arguments);\n      }\n\n      return generateSignedPreKey;\n    }()\n  }, {\n    key: \"addDeviceIdToDeviceList\",\n    value: function () {\n      var _addDeviceIdToDeviceList = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6() {\n        var deviceIds, ownDeviceId;\n        return _regenerator.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this.store.getOwnDeviceList();\n\n              case 2:\n                deviceIds = _context6.sent;\n                _context6.next = 5;\n                return this.store.getDeviceId();\n\n              case 5:\n                ownDeviceId = _context6.sent;\n                if (deviceIds.indexOf(ownDeviceId) < 0) deviceIds.push(ownDeviceId);\n                return _context6.abrupt(\"return\", this.connection.publishDevices(deviceIds, ownDeviceId));\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function addDeviceIdToDeviceList() {\n        return _addDeviceIdToDeviceList.apply(this, arguments);\n      }\n\n      return addDeviceIdToDeviceList;\n    }()\n  }]);\n  return Bootstrap;\n}();\n\nexports.Bootstrap = Bootstrap;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Bundle = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _arraybuffer = require(\"./arraybuffer\");\n\nvar _random = require(\"./random\");\n\nvar Bundle = /*#__PURE__*/function () {\n  function Bundle(bundle) {\n    (0, _classCallCheck2.default)(this, Bundle);\n    this.bundle = bundle;\n  }\n\n  (0, _createClass2.default)(Bundle, [{\n    key: \"getIdentityKey\",\n    value: function getIdentityKey() {\n      return this.bundle.identityKey;\n    }\n  }, {\n    key: \"getSignedPreKey\",\n    value: function getSignedPreKey() {\n      return this.bundle.signedPreKey;\n    }\n  }, {\n    key: \"getRandomPreKey\",\n    value: function getRandomPreKey() {\n      var numberOfPreKeys = this.bundle.preKeys.length;\n\n      var candidateNumber = _random.Random.number(numberOfPreKeys - 1);\n\n      return this.bundle.preKeys[candidateNumber];\n    }\n  }, {\n    key: \"toSignalBundle\",\n    value: function toSignalBundle(registrationId) {\n      var _this$getIdentityKey;\n\n      var preKey = this.getRandomPreKey();\n      var signedPreKey = this.getSignedPreKey();\n      return {\n        identityKey: (_this$getIdentityKey = this.getIdentityKey()) === null || _this$getIdentityKey === void 0 ? void 0 : _this$getIdentityKey.pubKey,\n        registrationId: registrationId,\n        preKey: {\n          keyId: preKey.keyId,\n          publicKey: preKey.keyPair.pubKey\n        },\n        signedPreKey: {\n          keyId: signedPreKey.keyId,\n          publicKey: signedPreKey.keyPair.pubKey,\n          signature: signedPreKey.signature\n        }\n      };\n    }\n  }, {\n    key: \"toObject\",\n    value: function toObject() {\n      var _this$bundle$identity;\n\n      return {\n        signedPreKeyPublic: {\n          signedPreKeyId: this.bundle.signedPreKey.keyId,\n          value: _arraybuffer.ArrayBufferUtils.toBase64(this.bundle.signedPreKey.keyPair.pubKey)\n        },\n        signedPreKeySignature: _arraybuffer.ArrayBufferUtils.toBase64(this.bundle.signedPreKey.signature),\n        identityKey: _arraybuffer.ArrayBufferUtils.toBase64((_this$bundle$identity = this.bundle.identityKey) === null || _this$bundle$identity === void 0 ? void 0 : _this$bundle$identity.pubKey),\n        preKeyPublic: this.bundle.preKeys.map(function (preKey) {\n          return {\n            preKeyId: preKey.keyId,\n            value: _arraybuffer.ArrayBufferUtils.toBase64(preKey.keyPair.pubKey)\n          };\n        })\n      };\n    }\n  }], [{\n    key: \"fromJSON\",\n    value: function fromJSON(json) {\n      var xmlIdentityKey = json[\"identityKey\"];\n      var xmlSignedPreKeyPublic = json[\"signedPreKeyPublic\"];\n      var xmlSignedPreKeySignature = json[\"signedPreKeySignature\"];\n      var xmlPreKeys = json[\"preKeyPublic\"];\n      return new Bundle({\n        identityKey: {\n          pubKey: _arraybuffer.ArrayBufferUtils.fromBase64(xmlIdentityKey)\n        },\n        signedPreKey: {\n          keyPair: {\n            pubKey: _arraybuffer.ArrayBufferUtils.fromBase64(xmlSignedPreKeyPublic.value)\n          },\n          signature: _arraybuffer.ArrayBufferUtils.fromBase64(xmlSignedPreKeySignature),\n          keyId: xmlSignedPreKeyPublic.signedPreKeyId\n        },\n        preKeys: xmlPreKeys.map(function (element) {\n          return {\n            keyPair: {\n              pubKey: _arraybuffer.ArrayBufferUtils.fromBase64(element.value)\n            },\n            keyId: element.preKeyId\n          };\n        })\n      });\n    }\n  }]);\n  return Bundle;\n}();\n\nexports.Bundle = Bundle;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Connection = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/toConsumableArray\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _omemo = require(\"./omemo\");\n\nvar _storage = require(\"./storage\");\n\nvar _auth = require(\"../../../api/auth\");\n\nvar _localforage = _interopRequireDefault(require(\"localforage\"));\n\nvar Connection = /*#__PURE__*/function () {\n  function Connection(username, to, onMessage) {\n    var _process$env$BASE_URL,\n        _this = this;\n\n    (0, _classCallCheck2.default)(this, Connection);\n    (0, _defineProperty2.default)(this, \"lastMessage\", \"\");\n    this.username = username;\n    this.onMessage = onMessage;\n    this.to = to;\n    this.resolves = {};\n    var channel = new WebSocket(\"\".concat((_process$env$BASE_URL = process.env.BASE_URL) === null || _process$env$BASE_URL === void 0 ? void 0 : _process$env$BASE_URL.replace(\"http\", \"ws\"), \"/ws/chat/message?token=\").concat((0, _auth.getAuth)()));\n\n    this.send = function (o) {\n      return channel.send(JSON.stringify(o));\n    };\n\n    this.disconnect = function () {\n      return channel.close();\n    };\n\n    channel.onopen = function () {\n      return _this.send({\n        type: \"register\",\n        username: _this.username\n      });\n    };\n\n    channel.onmessage = /*#__PURE__*/function () {\n      var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(_ref) {\n        var data, msg, ownId, devices, storage, _bundle, i, fn;\n\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                data = _ref.data;\n\n                if (!(_this.lastMessage === data)) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 3:\n                _this.lastMessage = data;\n                console.log(\"received message of type\", data.type);\n                msg = JSON.parse(data);\n                _context.t0 = msg.type;\n                _context.next = _context.t0 === \"registered\" ? 9 : _context.t0 === \"devices\" ? 21 : _context.t0 === \"bundle\" ? 23 : _context.t0 === \"message\" ? 28 : 37;\n                break;\n\n              case 9:\n                _context.next = 11;\n                return _localforage.default.getItem(\"deviceId\");\n\n              case 11:\n                ownId = _context.sent;\n                devices = msg.devices.filter(function (id) {\n                  return Number(id) !== ownId;\n                });\n                console.log(\"registered, already registered devices: \\n\", devices);\n                storage = new _storage.Storage();\n                _this.omemo = new _omemo.Omemo(storage, _this, devices.length);\n                if (devices.length > 0) _this.updateDevices({\n                  username: _this.username,\n                  devices: devices\n                });\n                _context.next = 19;\n                return _this.omemo.prepare();\n\n              case 19:\n                if (ownId) _this.publishDevices([].concat((0, _toConsumableArray2.default)(devices), [ownId]), ownId);\n                return _context.abrupt(\"break\", 38);\n\n              case 21:\n                _this.updateDevices(msg);\n\n                return _context.abrupt(\"break\", 38);\n\n              case 23:\n                if (msg.deviceId in _this.resolves) {\n                  _context.next = 25;\n                  break;\n                }\n\n                return _context.abrupt(\"break\", 38);\n\n              case 25:\n                _bundle = msg.bundle;\n\n                for (i = 0; i < _this.resolves[msg.deviceId].length; i++) {\n                  fn = _this.resolves[msg.deviceId].pop();\n                  if (fn) fn(_bundle);\n                }\n\n                return _context.abrupt(\"break\", 38);\n\n              case 28:\n                if (!(\"encrypted\" in msg)) {\n                  _context.next = 36;\n                  break;\n                }\n\n                _context.t1 = _this;\n                _context.next = 32;\n                return _this.decrypt(msg);\n\n              case 32:\n                _context.t2 = _context.sent;\n                _context.t3 = msg.from;\n                _context.t4 = msg.mime;\n\n                _context.t1.onMessage.call(_context.t1, _context.t2, _context.t3, _context.t4);\n\n              case 36:\n                return _context.abrupt(\"break\", 38);\n\n              case 37:\n                console.warn(\"unknown message type: %s\", msg.type);\n\n              case 38:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n  }\n\n  (0, _createClass2.default)(Connection, [{\n    key: \"publishDevices\",\n    value: function publishDevices(devices, ownDeviceId) {\n      console.log(\"sending devices: \\n%s\", JSON.stringify(devices, null, 4));\n      this.send({\n        type: \"devices\",\n        username: this.username,\n        devices: devices,\n        ownDeviceId: ownDeviceId\n      });\n    }\n  }, {\n    key: \"publishBundle\",\n    value: function publishBundle(deviceId, bundle) {\n      this.send({\n        type: \"bundle\",\n        deviceId: deviceId,\n        username: this.username,\n        bundle: bundle\n      });\n    }\n  }, {\n    key: \"sendMessage\",\n    value: function () {\n      var _sendMessage = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(message, mime) {\n        var _this$omemo;\n\n        var encryptedMessage;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return (_this$omemo = this.omemo) === null || _this$omemo === void 0 ? void 0 : _this$omemo.encrypt(this.to, message);\n\n              case 2:\n                encryptedMessage = _context2.sent;\n                console.log(\"sending message to\", this.to);\n                this.send({\n                  type: \"message\",\n                  from: this.username,\n                  to: this.to,\n                  encrypted: encryptedMessage,\n                  mime: mime\n                });\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function sendMessage(_x2, _x3) {\n        return _sendMessage.apply(this, arguments);\n      }\n\n      return sendMessage;\n    }()\n  }, {\n    key: \"decrypt\",\n    value: function () {\n      var _decrypt = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(message) {\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (this.omemo) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                throw Error(\"Not O-memo initialised\");\n\n              case 2:\n                _context3.next = 4;\n                return this.omemo.decrypt(message);\n\n              case 4:\n                return _context3.abrupt(\"return\", _context3.sent);\n\n              case 5:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function decrypt(_x4) {\n        return _decrypt.apply(this, arguments);\n      }\n\n      return decrypt;\n    }()\n  }, {\n    key: \"updateDevices\",\n    value: function updateDevices(message) {\n      var _this$omemo2, _this$omemo3;\n\n      var ownJid = this.username;\n      var deviceIds = message.devices;\n      if (ownJid === message.username) (_this$omemo2 = this.omemo) === null || _this$omemo2 === void 0 ? void 0 : _this$omemo2.storeOwnDeviceList(deviceIds); //@TODO handle own update (check for own device id)\n      else (_this$omemo3 = this.omemo) === null || _this$omemo3 === void 0 ? void 0 : _this$omemo3.storeDeviceList(message.username, deviceIds);\n    }\n  }, {\n    key: \"getBundle\",\n    value: function getBundle(deviceId) {\n      var _this2 = this;\n\n      return new Promise(function (resolve) {\n        if (!(deviceId in _this2.resolves)) _this2.resolves[deviceId] = [];\n\n        _this2.resolves[deviceId].push(resolve);\n\n        _this2.send({\n          type: \"getBundle\",\n          deviceId: deviceId,\n          username: _this2.to\n        });\n      });\n    }\n  }]);\n  return Connection;\n}();\n\nexports.Connection = Connection;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Device = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _index = require(\"./index\");\n\nvar Device = /*#__PURE__*/function () {\n  function Device(jid, id, store) {\n    (0, _classCallCheck2.default)(this, Device);\n    this.address = new _index.SignalProtocolAddress(jid, id);\n    this.store = store;\n  }\n\n  (0, _createClass2.default)(Device, [{\n    key: \"decrypt\",\n    value: function () {\n      var _decrypt = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(ciphertext) {\n        var preKey,\n            sessionCipher,\n            plaintextBuffer,\n            _args = arguments;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                preKey = _args.length > 1 && _args[1] !== undefined ? _args[1] : false;\n                sessionCipher = new _index.SessionCipher(this.store, this.address);\n\n                if (!preKey) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 5;\n                return sessionCipher.decryptPreKeyWhisperMessage(ciphertext, \"binary\");\n\n              case 5:\n                plaintextBuffer = _context.sent;\n                _context.next = 11;\n                break;\n\n              case 8:\n                _context.next = 10;\n                return sessionCipher.decryptWhisperMessage(ciphertext, \"binary\");\n\n              case 10:\n                plaintextBuffer = _context.sent;\n\n              case 11:\n                return _context.abrupt(\"return\", plaintextBuffer);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function decrypt(_x) {\n        return _decrypt.apply(this, arguments);\n      }\n\n      return decrypt;\n    }()\n  }, {\n    key: \"encrypt\",\n    value: function () {\n      var _encrypt = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(plaintext) {\n        var session, ciphertext;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                _context2.next = 3;\n                return this.store.hasSession(this.address.toString());\n\n              case 3:\n                if (_context2.sent) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                _context2.next = 6;\n                return this.establishSession();\n\n              case 6:\n                session = this.getSession();\n                _context2.next = 9;\n                return session === null || session === void 0 ? void 0 : session.encrypt(plaintext);\n\n              case 9:\n                ciphertext = _context2.sent;\n                return _context2.abrupt(\"return\", {\n                  preKey: ciphertext.type === 3,\n                  ciphertext: ciphertext,\n                  deviceId: this.address.getDeviceId()\n                });\n\n              case 13:\n                _context2.prev = 13;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(\"Error:\", _context2.t0);\n                console.warn(\"Could not encrypt data for device with id \" + this.address.getDeviceId());\n                return _context2.abrupt(\"return\", null);\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 13]]);\n      }));\n\n      function encrypt(_x2) {\n        return _encrypt.apply(this, arguments);\n      }\n\n      return encrypt;\n    }()\n  }, {\n    key: \"processPreKeyMessage\",\n    value: function processPreKeyMessage(preKeyBundle) {\n      var builder = new _index.SessionBuilder(this.store, this.address);\n      return builder.processPreKey(preKeyBundle);\n    }\n  }, {\n    key: \"establishSession\",\n    value: function () {\n      var _establishSession = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        var signalBundle;\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.store.getPreKeyBundle(this.address);\n\n              case 2:\n                signalBundle = _context3.sent;\n                this.processPreKeyMessage(signalBundle);\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function establishSession() {\n        return _establishSession.apply(this, arguments);\n      }\n\n      return establishSession;\n    }()\n  }, {\n    key: \"getSession\",\n    value: function getSession() {\n      return this.session || (this.session = new _index.SessionCipher(this.store, this.address));\n    }\n  }]);\n  return Device;\n}();\n\nexports.Device = Device;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.SignalProtocolAddress = exports.SessionCipher = exports.SessionBuilder = exports.NUM_PRE_KEYS = exports.KeyHelper = exports.AES_TAG_LENGTH = exports.AES_KEY_LENGTH = exports.AES_EXTRACTABLE = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _connection = require(\"./connection\");\n\nvar _localforage = _interopRequireDefault(require(\"localforage\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar NUM_PRE_KEYS = 10;\nexports.NUM_PRE_KEYS = NUM_PRE_KEYS;\nvar AES_KEY_LENGTH = 128;\nexports.AES_KEY_LENGTH = AES_KEY_LENGTH;\nvar AES_TAG_LENGTH = 128;\nexports.AES_TAG_LENGTH = AES_TAG_LENGTH;\nvar AES_EXTRACTABLE = true; // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n\nexports.AES_EXTRACTABLE = AES_EXTRACTABLE;\nvar libSignal = window.libsignal;\nvar KeyHelper = libSignal.KeyHelper;\nexports.KeyHelper = KeyHelper;\nvar SignalProtocolAddress = libSignal.SignalProtocolAddress;\nexports.SignalProtocolAddress = SignalProtocolAddress;\nvar SessionBuilder = libSignal.SessionBuilder;\nexports.SessionBuilder = SessionBuilder;\nvar SessionCipher = libSignal.SessionCipher;\nexports.SessionCipher = SessionCipher;\n\nvar SignalConnection = /*#__PURE__*/function () {\n  function SignalConnection(username, to, onMessage) {\n    var _this = this;\n\n    (0, _classCallCheck2.default)(this, SignalConnection);\n    (0, _defineProperty2.default)(this, \"getTime\", function (date) {\n      return date.toLocaleTimeString(\"en-US\", {\n        hour: \"numeric\",\n        minute: \"numeric\",\n        hour12: true\n      });\n    });\n    (0, _defineProperty2.default)(this, \"handleMessage\", /*#__PURE__*/function () {\n      var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(message, from, mime) {\n        var type, msg;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(message, \"Handle Message\");\n\n                if (_this.messages) {\n                  _context.next = 8;\n                  break;\n                }\n\n                _context.next = 4;\n                return _localforage.default.getItem(\"messages-\".concat(from));\n\n              case 4:\n                _context.t0 = _context.sent;\n\n                if (_context.t0) {\n                  _context.next = 7;\n                  break;\n                }\n\n                _context.t0 = [];\n\n              case 7:\n                _this.messages = _context.t0;\n\n              case 8:\n                type = from === _this.username ? \"sent\" : \"received\";\n                msg = {\n                  time: _this.getTime(new Date()),\n                  seen: false,\n                  type: type\n                };\n                if (!mime) _this.messages.push(_objectSpread(_objectSpread({}, msg), {}, {\n                  content: message\n                }));else _this.messages.push(_objectSpread(_objectSpread({}, msg), {}, {\n                  attachment: message,\n                  mime: mime\n                }));\n                _context.next = 13;\n                return _localforage.default.setItem(\"messages-\".concat(from), _this.messages);\n\n              case 13:\n                _this.onMessage(_this.messages);\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2, _x3) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n    this.connection = new _connection.Connection(username, to, this.handleMessage);\n    this.onMessage = onMessage;\n    this.to = to;\n    this.username = username;\n  }\n\n  (0, _createClass2.default)(SignalConnection, [{\n    key: \"sendMessage\",\n    value: function () {\n      var _sendMessage = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(message, mime) {\n        var _this2 = this;\n\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this.messages) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                _context2.next = 3;\n                return _localforage.default.getItem(\"messages-\".concat(this.to));\n\n              case 3:\n                _context2.t0 = _context2.sent;\n\n                if (_context2.t0) {\n                  _context2.next = 6;\n                  break;\n                }\n\n                _context2.t0 = [];\n\n              case 6:\n                this.messages = _context2.t0;\n\n              case 7:\n                _context2.next = 9;\n                return this.connection.sendMessage(message, mime).then(function () {\n                  var _this2$messages, _this2$messages2;\n\n                  var msg = {\n                    time: _this2.getTime(new Date()),\n                    seen: false,\n                    type: \"sent\"\n                  };\n                  if (!mime) (_this2$messages = _this2.messages) === null || _this2$messages === void 0 ? void 0 : _this2$messages.push(_objectSpread(_objectSpread({}, msg), {}, {\n                    content: message\n                  }));else (_this2$messages2 = _this2.messages) === null || _this2$messages2 === void 0 ? void 0 : _this2$messages2.push(_objectSpread(_objectSpread({}, msg), {}, {\n                    attachment: message,\n                    mime: mime\n                  }));\n\n                  _this2.onMessage(_this2.messages || []);\n\n                  return _localforage.default.setItem(\"messages-\".concat(_this2.to), _this2.messages);\n                }).catch(function (e) {\n                  return console.error(e);\n                });\n\n              case 9:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function sendMessage(_x4, _x5) {\n        return _sendMessage.apply(this, arguments);\n      }\n\n      return sendMessage;\n    }()\n  }, {\n    key: \"tareDown\",\n    value: function tareDown() {\n      this.connection.disconnect();\n    }\n  }]);\n  return SignalConnection;\n}();\n\nexports.default = SignalConnection;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Omemo = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _store = require(\"./store\");\n\nvar _peer = require(\"./peer\");\n\nvar _bootstrap = require(\"./bootstrap\");\n\nvar _arraybuffer = require(\"./arraybuffer\");\n\nvar _index = require(\"./index\");\n\nvar _stanza = require(\"./stanza\");\n\nvar Omemo = /*#__PURE__*/function () {\n  function Omemo(storage, connection, deviceNumber) {\n    var _this = this;\n\n    (0, _classCallCheck2.default)(this, Omemo);\n    (0, _defineProperty2.default)(this, \"getPeer\", function (jid) {\n      return _this.peers[jid] || (_this.peers[jid] = new _peer.Peer(jid, _this.store));\n    });\n    this.connection = connection;\n    this.store = new _store.Store(storage, connection, deviceNumber);\n    this.peers = {};\n\n    _peer.Peer.setOwnUid(connection.username);\n\n    this.deviceNumber = deviceNumber;\n  }\n\n  (0, _createClass2.default)(Omemo, [{\n    key: \"storeOwnDeviceList\",\n    value: function storeOwnDeviceList(deviceList) {\n      return this.store.setOwnDeviceList(deviceList);\n    }\n  }, {\n    key: \"storeDeviceList\",\n    value: function storeDeviceList(identifier, deviceList) {\n      return this.store.setDeviceList(identifier, deviceList);\n    }\n  }, {\n    key: \"prepare\",\n    value: function prepare() {\n      if (!this.bootstrap) this.bootstrap = new _bootstrap.Bootstrap(this.store, this.connection);\n      return this.bootstrap.prepare();\n    }\n  }, {\n    key: \"encrypt\",\n    value: function encrypt(contact, message) {\n      var _this2 = this;\n\n      var peer = this.getPeer(contact);\n      return peer.encrypt(message).then( /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(encryptedMessages) {\n          return _regenerator.default.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.t0 = _stanza.Stanza;\n                  _context.t1 = encryptedMessages;\n                  _context.next = 4;\n                  return _this2.store.getDeviceId();\n\n                case 4:\n                  _context.t2 = _context.sent;\n                  return _context.abrupt(\"return\", _context.t0.buildEncryptedStanza.call(_context.t0, _context.t1, _context.t2));\n\n                case 6:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    }\n  }, {\n    key: \"decrypt\",\n    value: function () {\n      var _decrypt = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(stanza) {\n        var encryptedElement, from, encryptedData, ownDeviceId, ownPreKeyFiltered, ownPreKey, peer, exportedKey, exportedAESKey, authenticationTag, iv, ciphertextAndAuthenticationTag;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(stanza.type !== \"message\")) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                throw \"Root element is no message element\";\n\n              case 2:\n                encryptedElement = stanza.encrypted;\n\n                if (!(encryptedElement === undefined)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                throw \"No encrypted stanza found\";\n\n              case 5:\n                from = stanza.from;\n                encryptedData = _stanza.Stanza.parseEncryptedStanza(encryptedElement);\n\n                if (encryptedData) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                throw \"Could not parse encrypted stanza\";\n\n              case 9:\n                _context2.next = 11;\n                return this.store.getDeviceId();\n\n              case 11:\n                ownDeviceId = _context2.sent;\n                ownPreKeyFiltered = encryptedData.keys.filter(function (_ref2) {\n                  var deviceId = _ref2.deviceId;\n                  return ownDeviceId === Number(deviceId);\n                });\n\n                if (!(ownPreKeyFiltered.length !== 1)) {\n                  _context2.next = 15;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", Promise.reject(\"Found \".concat(ownPreKeyFiltered.length, \" PreKeys which match my device id (\").concat(ownDeviceId, \").\")));\n\n              case 15:\n                ownPreKey = ownPreKeyFiltered[0]; //@TODO rename var\n\n                peer = this.getPeer(from); //   const exportedKey;\n\n                _context2.prev = 17;\n                _context2.next = 20;\n                return peer.decrypt(encryptedData.sourceDeviceId, ownPreKey.ciphertext, ownPreKey.preKey);\n\n              case 20:\n                exportedKey = _context2.sent;\n                _context2.next = 26;\n                break;\n\n              case 23:\n                _context2.prev = 23;\n                _context2.t0 = _context2[\"catch\"](17);\n                throw \"Error during decryption: \" + _context2.t0;\n\n              case 26:\n                exportedAESKey = exportedKey.slice(0, 16);\n                authenticationTag = exportedKey.slice(16);\n\n                if (!(authenticationTag.byteLength !== 16)) {\n                  _context2.next = 30;\n                  break;\n                }\n\n                throw \"Authentication tag too short\";\n\n              case 30:\n                iv = encryptedData.iv;\n                ciphertextAndAuthenticationTag = _arraybuffer.ArrayBufferUtils.concat(encryptedData.payload, authenticationTag);\n                return _context2.abrupt(\"return\", this.decryptWithAES(exportedAESKey, iv, ciphertextAndAuthenticationTag));\n\n              case 33:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[17, 23]]);\n      }));\n\n      function decrypt(_x2) {\n        return _decrypt.apply(this, arguments);\n      }\n\n      return decrypt;\n    }()\n  }, {\n    key: \"decryptWithAES\",\n    value: function () {\n      var _decryptWithAES = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(exportedAESKey, iv, data) {\n        var key, decryptedBuffer;\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return window.crypto.subtle.importKey(\"raw\", exportedAESKey, {\n                  name: \"AES-GCM\"\n                }, false, [\"decrypt\"]);\n\n              case 2:\n                key = _context3.sent;\n                _context3.next = 5;\n                return window.crypto.subtle.decrypt({\n                  name: \"AES-GCM\",\n                  iv: iv,\n                  tagLength: _index.AES_TAG_LENGTH\n                }, key, data);\n\n              case 5:\n                decryptedBuffer = _context3.sent;\n                return _context3.abrupt(\"return\", _arraybuffer.ArrayBufferUtils.decode(decryptedBuffer));\n\n              case 7:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function decryptWithAES(_x3, _x4, _x5) {\n        return _decryptWithAES.apply(this, arguments);\n      }\n\n      return decryptWithAES;\n    }()\n  }]);\n  return Omemo;\n}();\n\nexports.Omemo = Omemo;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Peer = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _arraybuffer = require(\"./arraybuffer\");\n\nvar _index = require(\"./index\");\n\nvar _device2 = require(\"./device\");\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar Peer = /*#__PURE__*/function () {\n  function Peer(uid, store) {\n    (0, _classCallCheck2.default)(this, Peer);\n    this.uid = uid;\n    this.store = store;\n    this.devices = {};\n  }\n\n  (0, _createClass2.default)(Peer, [{\n    key: \"encrypt\",\n    value: function () {\n      var _encrypt = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(plaintext) {\n        var _this = this;\n\n        var remoteDeviceIds, ownDeviceIds, aes, promises, _iterator, _step, id, device, _iterator2, _step2, _id, _device, keys;\n\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.store.getDeviceList(this.uid);\n\n              case 2:\n                remoteDeviceIds = _context2.sent;\n                _context2.next = 5;\n                return this.store.getOwnDeviceList();\n\n              case 5:\n                ownDeviceIds = _context2.sent.filter( /*#__PURE__*/function () {\n                  var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(id) {\n                    return _regenerator.default.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.t0 = id;\n                            _context.next = 3;\n                            return _this.store.getDeviceId();\n\n                          case 3:\n                            _context.t1 = _context.sent;\n                            return _context.abrupt(\"return\", _context.t0 !== _context.t1);\n\n                          case 5:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x2) {\n                    return _ref.apply(this, arguments);\n                  };\n                }());\n                _context2.next = 8;\n                return this.encryptWithAES(plaintext);\n\n              case 8:\n                aes = _context2.sent;\n                promises = [];\n                _iterator = _createForOfIteratorHelper(remoteDeviceIds);\n\n                try {\n                  for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                    id = _step.value;\n                    device = this.getDevice(id);\n                    promises.push(device.encrypt(aes.keydata));\n                  }\n                } catch (err) {\n                  _iterator.e(err);\n                } finally {\n                  _iterator.f();\n                }\n\n                _iterator2 = _createForOfIteratorHelper(ownDeviceIds);\n\n                try {\n                  for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                    _id = _step2.value;\n                    _device = this.getOwnDevice(_id);\n                    promises.push(_device.encrypt(aes.keydata));\n                  }\n                } catch (err) {\n                  _iterator2.e(err);\n                } finally {\n                  _iterator2.f();\n                }\n\n                _context2.next = 16;\n                return Promise.all(promises);\n\n              case 16:\n                keys = _context2.sent;\n                keys = keys.filter(function (key) {\n                  return key !== null;\n                });\n\n                if (!(keys.length === 0)) {\n                  _context2.next = 20;\n                  break;\n                }\n\n                throw \"Could not encrypt data with any Signal session\";\n\n              case 20:\n                return _context2.abrupt(\"return\", {\n                  keys: keys,\n                  iv: aes.iv,\n                  payload: aes.payload\n                });\n\n              case 21:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function encrypt(_x) {\n        return _encrypt.apply(this, arguments);\n      }\n\n      return encrypt;\n    }()\n  }, {\n    key: \"decrypt\",\n    value: function decrypt(deviceId, ciphertext) {\n      var preKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var device = this.getDevice(deviceId);\n      return device.decrypt(ciphertext, preKey);\n    }\n  }, {\n    key: \"getDevice\",\n    value: function getDevice(id) {\n      if (!this.devices[id]) this.devices[id] = new _device2.Device(this.uid, id, this.store);\n      return this.devices[id];\n    }\n  }, {\n    key: \"getOwnDevice\",\n    value: function getOwnDevice(id) {\n      if (!Peer.ownDevices[id]) Peer.ownDevices[id] = new _device2.Device(Peer.ownUid, id, this.store);\n      return Peer.ownDevices[id];\n    }\n  }, {\n    key: \"encryptWithAES\",\n    value: function () {\n      var _encryptWithAES = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(plaintext) {\n        var iv, key, encrypted, ciphertext, authenticationTag, keydata;\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                iv = window.crypto.getRandomValues(new Uint8Array(12));\n                _context3.next = 3;\n                return this.generateAESKey();\n\n              case 3:\n                key = _context3.sent;\n                _context3.next = 6;\n                return this.generateAESencryptedMessage(iv, key, plaintext);\n\n              case 6:\n                encrypted = _context3.sent;\n                ciphertext = encrypted.ciphertext;\n                authenticationTag = encrypted.authenticationTag;\n                _context3.next = 11;\n                return window.crypto.subtle.exportKey(\"raw\", key);\n\n              case 11:\n                keydata = _context3.sent;\n                return _context3.abrupt(\"return\", {\n                  keydata: _arraybuffer.ArrayBufferUtils.concat(keydata, authenticationTag),\n                  iv: iv,\n                  payload: ciphertext\n                });\n\n              case 13:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function encryptWithAES(_x3) {\n        return _encryptWithAES.apply(this, arguments);\n      }\n\n      return encryptWithAES;\n    }()\n  }, {\n    key: \"generateAESKey\",\n    value: function () {\n      var _generateAESKey = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4() {\n        var algo, keyUsage;\n        return _regenerator.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                algo = {\n                  name: \"AES-GCM\",\n                  length: _index.AES_KEY_LENGTH\n                };\n                keyUsage = [\"encrypt\", \"decrypt\"];\n                _context4.next = 4;\n                return window.crypto.subtle.generateKey(algo, _index.AES_EXTRACTABLE, keyUsage);\n\n              case 4:\n                return _context4.abrupt(\"return\", _context4.sent);\n\n              case 5:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function generateAESKey() {\n        return _generateAESKey.apply(this, arguments);\n      }\n\n      return generateAESKey;\n    }()\n  }, {\n    key: \"generateAESencryptedMessage\",\n    value: function () {\n      var _generateAESencryptedMessage = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(iv, key, plaintext) {\n        var encryptOptions, encodedPlaintext, encrypted, ciphertextLength, ciphertext, authenticationTag;\n        return _regenerator.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                encryptOptions = {\n                  name: \"AES-GCM\",\n                  iv: iv,\n                  tagLength: _index.AES_TAG_LENGTH\n                };\n                encodedPlaintext = _arraybuffer.ArrayBufferUtils.encode(plaintext);\n                _context5.next = 4;\n                return window.crypto.subtle.encrypt(encryptOptions, key, encodedPlaintext);\n\n              case 4:\n                encrypted = _context5.sent;\n                ciphertextLength = encrypted.byteLength - (128 + 7 >> 3);\n                ciphertext = encrypted.slice(0, ciphertextLength);\n                authenticationTag = encrypted.slice(ciphertextLength);\n                return _context5.abrupt(\"return\", {\n                  ciphertext: ciphertext,\n                  authenticationTag: authenticationTag\n                });\n\n              case 9:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function generateAESencryptedMessage(_x4, _x5, _x6) {\n        return _generateAESencryptedMessage.apply(this, arguments);\n      }\n\n      return generateAESencryptedMessage;\n    }()\n  }], [{\n    key: \"setOwnUid\",\n    value: function setOwnUid(uid) {\n      //@REVIEW\n      Peer.ownUid = uid;\n      Peer.ownDevices = {};\n    }\n  }]);\n  return Peer;\n}();\n\nexports.Peer = Peer;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Random = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar Random = /*#__PURE__*/function () {\n  function Random() {\n    (0, _classCallCheck2.default)(this, Random);\n  }\n\n  (0, _createClass2.default)(Random, null, [{\n    key: \"number\",\n    value: function number(max) {\n      var min = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      if (crypto && typeof crypto.getRandomValues === \"function\") return Random.numberWithCSPRG(max, min);else return Random.numberWithoutCSPRG(max, min);\n    }\n  }, {\n    key: \"numberWithCSPRG\",\n    value: function numberWithCSPRG(max, min) {\n      var randomBuffer = new Uint32Array(1);\n      window.crypto.getRandomValues(randomBuffer);\n      var randomNumber = randomBuffer[0] / (0xffffffff + 1);\n      min = Math.ceil(min);\n      max = Math.floor(max);\n      return Math.floor(randomNumber * (max - min + 1)) + min;\n    }\n  }, {\n    key: \"numberWithoutCSPRG\",\n    value: function numberWithoutCSPRG(max, min) {\n      return Math.floor(Math.random() * (max - min)) + min;\n    }\n  }]);\n  return Random;\n}();\n\nexports.Random = Random;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Stanza = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _arraybuffer = require(\"./arraybuffer\");\n\nvar Stanza = /*#__PURE__*/function () {\n  function Stanza() {\n    (0, _classCallCheck2.default)(this, Stanza);\n  }\n\n  (0, _createClass2.default)(Stanza, null, [{\n    key: \"buildEncryptedStanza\",\n    value: function buildEncryptedStanza(message, ownDeviceId) {\n      var encryptedElement = {\n        header: {\n          sid: ownDeviceId,\n          keys: [],\n          iv: _arraybuffer.ArrayBufferUtils.toBase64(message.iv)\n        },\n        payload: _arraybuffer.ArrayBufferUtils.toBase64(message.payload)\n      };\n      encryptedElement.header.keys = message.keys.map(function (key) {\n        var _key$ciphertext;\n\n        return {\n          rid: key.deviceId,\n          prekey: key.preKey ? true : undefined,\n          value: btoa((_key$ciphertext = key.ciphertext) === null || _key$ciphertext === void 0 ? void 0 : _key$ciphertext.body)\n        };\n      });\n      return encryptedElement;\n    }\n  }, {\n    key: \"parseEncryptedStanza\",\n    value: function parseEncryptedStanza(encryptedElement) {\n      var headerElement = encryptedElement.header;\n      var payloadElement = encryptedElement.payload;\n      if (headerElement === undefined) return false;\n      var sourceDeviceId = headerElement.sid;\n\n      var iv = _arraybuffer.ArrayBufferUtils.fromBase64(headerElement.iv);\n\n      var payload = _arraybuffer.ArrayBufferUtils.fromBase64(payloadElement);\n\n      var keys = headerElement.keys.map(function (keyElement) {\n        return {\n          preKey: keyElement.prekey,\n          ciphertext: atob(keyElement.value),\n          deviceId: keyElement.rid\n        };\n      });\n      return {\n        sourceDeviceId: sourceDeviceId,\n        keys: keys,\n        iv: iv,\n        payload: payload\n      };\n    }\n  }]);\n  return Stanza;\n}();\n\nexports.Stanza = Stanza;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Storage = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime/helpers/typeof\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _localforage = _interopRequireDefault(require(\"localforage\"));\n\nvar IGNORE_KEY = [\"rid\"];\nvar BACKEND = _localforage.default; // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\n\nvar $ = $ || null;\n\nvar Storage = /*#__PURE__*/function () {\n  function Storage() {\n    var _this = this;\n\n    (0, _classCallCheck2.default)(this, Storage);\n    (0, _defineProperty2.default)(this, \"onStorageEvent\", function (ev) {\n      var _ev$key;\n\n      var hooks = _this.hooks;\n      var key = (_ev$key = ev.key) === null || _ev$key === void 0 ? void 0 : _ev$key.replace(new RegExp(\"^\" + _this.getPrefix()), \"\");\n      var oldValue = ev.oldValue;\n      var newValue = ev.newValue;\n      if (IGNORE_KEY.indexOf(key) > -1) return;\n      var eventNames = Object.keys(hooks || {});\n      eventNames.forEach(function (eventName) {\n        if (key !== null && key !== void 0 && key.match(new RegExp(\"^\" + eventName + \"(:.+)?$\")) && hooks) {\n          var eventNameHooks = hooks[eventName] || [];\n          eventNameHooks.forEach(function (hook) {\n            hook(newValue || \"\", oldValue || \"\", key);\n          });\n        }\n      });\n    });\n    this.hooks = {};\n  }\n\n  (0, _createClass2.default)(Storage, [{\n    key: \"getName\",\n    value: function getName() {\n      return this.name;\n    }\n  }, {\n    key: \"generateKey\",\n    value: function generateKey() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return args.join(\"\");\n    }\n  }, {\n    key: \"getPrefix\",\n    value: function getPrefix() {\n      return this.name || \"\";\n    }\n  }, {\n    key: \"getBackend\",\n    value: function getBackend() {\n      return BACKEND;\n    }\n  }, {\n    key: \"setItem\",\n    value: function () {\n      var _setItem = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        var key,\n            value,\n            pre_key,\n            oldValue,\n            _args = arguments;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (_args.length === 2) {\n                  key = _args.length <= 0 ? undefined : _args[0];\n                  value = _args.length <= 1 ? undefined : _args[1];\n                } else if (_args.length === 3) {\n                  key = String(_args.length <= 0 ? undefined : _args[0]) + (_args.length <= 1 ? undefined : _args[1]);\n                  value = _args.length <= 2 ? undefined : _args[2];\n                }\n\n                pre_key = this.getPrefix() + key;\n                oldValue = BACKEND.getItem(pre_key);\n                _context.next = 5;\n                return BACKEND.setItem(pre_key, value);\n\n              case 5:\n                this.onStorageEvent({\n                  key: pre_key,\n                  oldValue: oldValue,\n                  newValue: value\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function setItem() {\n        return _setItem.apply(this, arguments);\n      }\n\n      return setItem;\n    }()\n  }, {\n    key: \"getItem\",\n    value: function () {\n      var _getItem = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        var _len2,\n            args,\n            _key2,\n            key,\n            _args2 = arguments;\n\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                for (_len2 = _args2.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n                  args[_key2] = _args2[_key2];\n                }\n\n                if (args.length === 1) key = args[0];else if (_args2.length === 2) key = String(args[0]) + args[1];\n                key = this.getPrefix() + key;\n                return _context2.abrupt(\"return\", BACKEND.getItem(key));\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getItem() {\n        return _getItem.apply(this, arguments);\n      }\n\n      return getItem;\n    }()\n  }, {\n    key: \"removeItem\",\n    value: function () {\n      var _removeItem = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3() {\n        var key,\n            _args3 = arguments;\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (_args3.length === 1) key = _args3.length <= 0 ? undefined : _args3[0];else if (_args3.length === 2) key = String(_args3.length <= 0 ? undefined : _args3[0]) + (_args3.length <= 1 ? undefined : _args3[1]);\n                _context3.next = 3;\n                return BACKEND.removeItem(this.getPrefix() + key);\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function removeItem() {\n        return _removeItem.apply(this, arguments);\n      }\n\n      return removeItem;\n    }()\n  }, {\n    key: \"increment\",\n    value: function () {\n      var _increment = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(key) {\n        var value;\n        return _regenerator.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                value = Number(this.getItem(key));\n                _context4.next = 3;\n                return this.setItem(key, String(value + 1));\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function increment(_x) {\n        return _increment.apply(this, arguments);\n      }\n\n      return increment;\n    }()\n  }, {\n    key: \"removeElement\",\n    value: function () {\n      var _removeElement = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5() {\n        var key,\n            name,\n            item,\n            _args5 = arguments;\n        return _regenerator.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (_args5.length === 2) {\n                  key = _args5.length <= 0 ? undefined : _args5[0];\n                  name = _args5.length <= 1 ? undefined : _args5[1];\n                } else if (_args5.length === 3) {\n                  key = String(_args5.length <= 0 ? undefined : _args5[0]) + (_args5.length <= 1 ? undefined : _args5[1]);\n                  name = _args5.length <= 2 ? undefined : _args5[2];\n                }\n\n                _context5.next = 3;\n                return this.getItem(key);\n\n              case 3:\n                item = _context5.sent;\n                if ($.isArray(item)) item = $.grep(item, function (e) {\n                  return e !== name;\n                });else if ((0, _typeof2.default)(item) === \"object\" && item !== null) delete item[name];\n                _context5.next = 7;\n                return this.setItem(key, item);\n\n              case 7:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function removeElement() {\n        return _removeElement.apply(this, arguments);\n      }\n\n      return removeElement;\n    }()\n  }, {\n    key: \"removeHook\",\n    value: function removeHook(eventName, func) {\n      var eventNameList = (this.hooks || {})[eventName] || [];\n      if (typeof func === \"undefined\") eventNameList = [];else if (eventNameList.indexOf(func) > -1) eventNameList = $.grep(eventNameList, function (i) {\n        return func !== i;\n      });\n      (this.hooks || {})[eventName] = eventNameList;\n    }\n  }], [{\n    key: \"clear\",\n    value: function () {\n      var _clear = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(name) {\n        var key;\n        return _regenerator.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.t0 = _regenerator.default.keys(BACKEND);\n\n              case 1:\n                if ((_context6.t1 = _context6.t0()).done) {\n                  _context6.next = 10;\n                  break;\n                }\n\n                key = _context6.t1.value;\n\n                if (BACKEND.hasOwnProperty(key)) {\n                  _context6.next = 5;\n                  break;\n                }\n\n                return _context6.abrupt(\"continue\", 1);\n\n              case 5:\n                if (!key.startsWith(name)) {\n                  _context6.next = 8;\n                  break;\n                }\n\n                _context6.next = 8;\n                return BACKEND.removeItem(key);\n\n              case 8:\n                _context6.next = 1;\n                break;\n\n              case 10:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function clear(_x2) {\n        return _clear.apply(this, arguments);\n      }\n\n      return clear;\n    }()\n  }]);\n  return Storage;\n}();\n\nexports.Storage = Storage;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Store = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _arraybuffer = require(\"./arraybuffer\");\n\nvar _bundle = require(\"./bundle\");\n\nvar _index = require(\"./index\");\n\nvar STORE_PREFIX_SESSION = \"session:\";\nvar STORE_PREFIX_IDENTITYKEY = \"identityKey:\";\nvar STORE_PREFIX_PREKEY = \"25519KeypreKey:\";\nvar STORE_PREFIX_SIGNEDPREKEY = \"25519KeysignedKey:\";\n\nvar Store = /*#__PURE__*/function () {\n  function Store(storage, connection, deviceNumber) {\n    (0, _classCallCheck2.default)(this, Store);\n    this.storage = storage;\n    this.connection = connection;\n    this.deviceNumber = deviceNumber;\n    this.Direction = {\n      SENDING: 1,\n      RECEIVING: 2\n    };\n  }\n\n  (0, _createClass2.default)(Store, [{\n    key: \"getOwnDeviceList\",\n    value: function () {\n      var _getOwnDeviceList = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.get(\"deviceList\");\n\n              case 2:\n                _context.t0 = _context.sent;\n\n                if (_context.t0) {\n                  _context.next = 5;\n                  break;\n                }\n\n                _context.t0 = [];\n\n              case 5:\n                return _context.abrupt(\"return\", _context.t0);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getOwnDeviceList() {\n        return _getOwnDeviceList.apply(this, arguments);\n      }\n\n      return getOwnDeviceList;\n    }()\n  }, {\n    key: \"setOwnDeviceList\",\n    value: function () {\n      var _setOwnDeviceList = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(deviceList) {\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.put(\"deviceList\", deviceList);\n\n              case 2:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function setOwnDeviceList(_x) {\n        return _setOwnDeviceList.apply(this, arguments);\n      }\n\n      return setOwnDeviceList;\n    }()\n  }, {\n    key: \"getDeviceList\",\n    value: function () {\n      var _getDeviceList = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(identifier) {\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this.get(\"deviceList:\" + identifier, []);\n\n              case 2:\n                _context3.t0 = _context3.sent;\n\n                if (_context3.t0) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                _context3.t0 = [];\n\n              case 5:\n                return _context3.abrupt(\"return\", _context3.t0);\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getDeviceList(_x2) {\n        return _getDeviceList.apply(this, arguments);\n      }\n\n      return getDeviceList;\n    }()\n  }, {\n    key: \"setDeviceList\",\n    value: function () {\n      var _setDeviceList = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4(identifier, deviceList) {\n        return _regenerator.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.put(\"deviceList:\" + identifier, deviceList);\n\n              case 2:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function setDeviceList(_x3, _x4) {\n        return _setDeviceList.apply(this, arguments);\n      }\n\n      return setDeviceList;\n    }()\n  }, {\n    key: \"isReady\",\n    value: function () {\n      var _isReady = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5() {\n        return _regenerator.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return this.get(\"deviceId\");\n\n              case 2:\n                _context5.t1 = _context5.sent;\n\n                if (!_context5.t1) {\n                  _context5.next = 7;\n                  break;\n                }\n\n                _context5.next = 6;\n                return this.get(\"identityKey\");\n\n              case 6:\n                _context5.t1 = _context5.sent;\n\n              case 7:\n                _context5.t0 = _context5.t1;\n\n                if (!_context5.t0) {\n                  _context5.next = 10;\n                  break;\n                }\n\n                _context5.t0 = this.get(\"registrationId\");\n\n              case 10:\n                return _context5.abrupt(\"return\", _context5.t0);\n\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function isReady() {\n        return _isReady.apply(this, arguments);\n      }\n\n      return isReady;\n    }()\n  }, {\n    key: \"isPublished\",\n    value: function () {\n      var _isPublished = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6() {\n        return _regenerator.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return this.get(\"published\");\n\n              case 2:\n                _context6.t1 = _context6.sent;\n                _context6.t0 = _context6.t1 === \"true\";\n\n                if (_context6.t0) {\n                  _context6.next = 9;\n                  break;\n                }\n\n                _context6.next = 7;\n                return this.get(\"published\");\n\n              case 7:\n                _context6.t2 = _context6.sent;\n                _context6.t0 = _context6.t2 === true;\n\n              case 9:\n                return _context6.abrupt(\"return\", _context6.t0);\n\n              case 10:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function isPublished() {\n        return _isPublished.apply(this, arguments);\n      }\n\n      return isPublished;\n    }()\n  }, {\n    key: \"getIdentityKeyPair\",\n    value: function getIdentityKeyPair() {\n      return Promise.resolve(this.get(\"identityKey\"));\n    }\n  }, {\n    key: \"getLocalRegistrationId\",\n    value: function getLocalRegistrationId() {\n      return Promise.resolve(this.get(\"registrationId\"));\n    }\n  }, {\n    key: \"getDeviceId\",\n    value: function () {\n      var _getDeviceId = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7() {\n        return _regenerator.default.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.t0 = parseInt;\n                _context7.next = 3;\n                return this.get(\"deviceId\");\n\n              case 3:\n                _context7.t1 = _context7.sent;\n\n                if (_context7.t1) {\n                  _context7.next = 6;\n                  break;\n                }\n\n                _context7.t1 = \"0\";\n\n              case 6:\n                _context7.t2 = _context7.t1;\n                return _context7.abrupt(\"return\", (0, _context7.t0)(_context7.t2));\n\n              case 8:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function getDeviceId() {\n        return _getDeviceId.apply(this, arguments);\n      }\n\n      return getDeviceId;\n    }()\n  }, {\n    key: \"put\",\n    value: function () {\n      var _put = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8(key, value) {\n        return _regenerator.default.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (!(!key || !value)) {\n                  _context8.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Tried to store undefined/null\");\n\n              case 2:\n                if (key.includes(\"identityKey\")) console.log(\"put %s: \", key, value);\n                _context8.next = 5;\n                return this.storage.setItem(key, value);\n\n              case 5:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function put(_x5, _x6) {\n        return _put.apply(this, arguments);\n      }\n\n      return put;\n    }()\n  }, {\n    key: \"get\",\n    value: function () {\n      var _get = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9(key, defaultValue) {\n        var data;\n        return _regenerator.default.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                if (!(key === null || key === undefined)) {\n                  _context9.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Tried to get value for undefined/null key\");\n\n              case 2:\n                _context9.next = 4;\n                return this.storage.getItem(key);\n\n              case 4:\n                data = _context9.sent;\n                return _context9.abrupt(\"return\", data || defaultValue);\n\n              case 6:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function get(_x7, _x8) {\n        return _get.apply(this, arguments);\n      }\n\n      return get;\n    }()\n  }, {\n    key: \"remove\",\n    value: function () {\n      var _remove = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee10(key) {\n        return _regenerator.default.wrap(function _callee10$(_context10) {\n          while (1) {\n            switch (_context10.prev = _context10.next) {\n              case 0:\n                if (!(key === null || key === undefined)) {\n                  _context10.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Tried to remove value for undefined/null key\");\n\n              case 2:\n                _context10.next = 4;\n                return this.storage.removeItem(key);\n\n              case 4:\n              case \"end\":\n                return _context10.stop();\n            }\n          }\n        }, _callee10, this);\n      }));\n\n      function remove(_x9) {\n        return _remove.apply(this, arguments);\n      }\n\n      return remove;\n    }()\n  }, {\n    key: \"isTrustedIdentity\",\n    value: function () {\n      var _isTrustedIdentity = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee11(identifier, identityKey) {\n        var trusted;\n        return _regenerator.default.wrap(function _callee11$(_context11) {\n          while (1) {\n            switch (_context11.prev = _context11.next) {\n              case 0:\n                if (identifier) {\n                  _context11.next = 2;\n                  break;\n                }\n\n                throw new Error(\"tried to check identity key for undefined/null key\");\n\n              case 2:\n                if (identityKey instanceof ArrayBuffer) {\n                  _context11.next = 4;\n                  break;\n                }\n\n                throw new Error(\"Expected identityKey to be an ArrayBuffer\");\n\n              case 4:\n                _context11.next = 6;\n                return this.get(STORE_PREFIX_IDENTITYKEY + identifier);\n\n              case 6:\n                trusted = _context11.sent;\n                console.log(\"trusted %s \\t %s \\t %s\", trusted === undefined, trusted, STORE_PREFIX_IDENTITYKEY + identifier);\n\n                if (!(trusted === undefined)) {\n                  _context11.next = 10;\n                  break;\n                }\n\n                return _context11.abrupt(\"return\", Promise.resolve(true));\n\n              case 10:\n                return _context11.abrupt(\"return\", Promise.resolve(_arraybuffer.ArrayBufferUtils.isEqual(identityKey, trusted)));\n\n              case 11:\n              case \"end\":\n                return _context11.stop();\n            }\n          }\n        }, _callee11, this);\n      }));\n\n      function isTrustedIdentity(_x10, _x11) {\n        return _isTrustedIdentity.apply(this, arguments);\n      }\n\n      return isTrustedIdentity;\n    }()\n  }, {\n    key: \"saveIdentity\",\n    value: function () {\n      var _saveIdentity = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee12(identifier, identityKey) {\n        var address, existing;\n        return _regenerator.default.wrap(function _callee12$(_context12) {\n          while (1) {\n            switch (_context12.prev = _context12.next) {\n              case 0:\n                if (identifier) {\n                  _context12.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Tried to put identity key for undefined/null key\");\n\n              case 2:\n                if (typeof identityKey === \"string\") identityKey = _arraybuffer.ArrayBufferUtils.toString(identityKey);\n                address = new _index.SignalProtocolAddress.fromString(identifier);\n                existing = this.get(STORE_PREFIX_IDENTITYKEY + address.toString());\n                _context12.next = 7;\n                return this.put(STORE_PREFIX_IDENTITYKEY + address.toString(), identityKey);\n\n              case 7:\n                _context12.t0 = Promise;\n                _context12.t1 = existing;\n\n                if (!_context12.t1) {\n                  _context12.next = 16;\n                  break;\n                }\n\n                _context12.t2 = _arraybuffer.ArrayBufferUtils;\n                _context12.t3 = identityKey;\n                _context12.next = 14;\n                return existing;\n\n              case 14:\n                _context12.t4 = _context12.sent;\n                _context12.t1 = _context12.t2.isEqual.call(_context12.t2, _context12.t3, _context12.t4);\n\n              case 16:\n                _context12.t5 = _context12.t1;\n                return _context12.abrupt(\"return\", _context12.t0.resolve.call(_context12.t0, _context12.t5));\n\n              case 18:\n              case \"end\":\n                return _context12.stop();\n            }\n          }\n        }, _callee12, this);\n      }));\n\n      function saveIdentity(_x12, _x13) {\n        return _saveIdentity.apply(this, arguments);\n      }\n\n      return saveIdentity;\n    }()\n  }, {\n    key: \"loadPreKey\",\n    value: function () {\n      var _loadPreKey = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee13(keyId) {\n        var res;\n        return _regenerator.default.wrap(function _callee13$(_context13) {\n          while (1) {\n            switch (_context13.prev = _context13.next) {\n              case 0:\n                _context13.next = 2;\n                return this.get(STORE_PREFIX_PREKEY + keyId);\n\n              case 2:\n                res = _context13.sent;\n                if (res !== undefined) res = {\n                  pubKey: res.pubKey,\n                  privKey: res.privKey\n                };\n                return _context13.abrupt(\"return\", Promise.resolve(res));\n\n              case 5:\n              case \"end\":\n                return _context13.stop();\n            }\n          }\n        }, _callee13, this);\n      }));\n\n      function loadPreKey(_x14) {\n        return _loadPreKey.apply(this, arguments);\n      }\n\n      return loadPreKey;\n    }()\n  }, {\n    key: \"storePreKey\",\n    value: function storePreKey(keyId, keyPair) {\n      return Promise.resolve(this.put(STORE_PREFIX_PREKEY + keyId, keyPair));\n    }\n  }, {\n    key: \"removePreKey\",\n    value: function removePreKey(keyId) {\n      //@TODO publish new bundle\n      return Promise.resolve(this.remove(STORE_PREFIX_PREKEY + keyId));\n    }\n  }, {\n    key: \"loadSignedPreKey\",\n    value: function () {\n      var _loadSignedPreKey = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee14(keyId) {\n        var res;\n        return _regenerator.default.wrap(function _callee14$(_context14) {\n          while (1) {\n            switch (_context14.prev = _context14.next) {\n              case 0:\n                _context14.next = 2;\n                return this.get(STORE_PREFIX_SIGNEDPREKEY + keyId);\n\n              case 2:\n                res = _context14.sent;\n                if (res !== undefined) res = {\n                  pubKey: res.pubKey,\n                  privKey: res.privKey\n                };\n                return _context14.abrupt(\"return\", Promise.resolve(res));\n\n              case 5:\n              case \"end\":\n                return _context14.stop();\n            }\n          }\n        }, _callee14, this);\n      }));\n\n      function loadSignedPreKey(_x15) {\n        return _loadSignedPreKey.apply(this, arguments);\n      }\n\n      return loadSignedPreKey;\n    }()\n  }, {\n    key: \"storeSignedPreKey\",\n    value: function storeSignedPreKey(keyId, keyPair) {\n      return Promise.resolve(this.put(STORE_PREFIX_SIGNEDPREKEY + keyId, keyPair));\n    }\n  }, {\n    key: \"removeSignedPreKey\",\n    value: function removeSignedPreKey(keyId) {\n      return Promise.resolve(this.remove(STORE_PREFIX_SIGNEDPREKEY + keyId));\n    }\n  }, {\n    key: \"loadSession\",\n    value: function loadSession(identifier) {\n      return Promise.resolve(this.get(STORE_PREFIX_SESSION + identifier));\n    }\n  }, {\n    key: \"storeSession\",\n    value: function storeSession(identifier, record) {\n      return Promise.resolve(this.put(STORE_PREFIX_SESSION + identifier, record));\n    }\n  }, {\n    key: \"hasSession\",\n    value: function () {\n      var _hasSession = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee15(identifier) {\n        return _regenerator.default.wrap(function _callee15$(_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                _context15.next = 2;\n                return this.get(STORE_PREFIX_SESSION + identifier);\n\n              case 2:\n                return _context15.abrupt(\"return\", !!_context15.sent);\n\n              case 3:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee15, this);\n      }));\n\n      function hasSession(_x16) {\n        return _hasSession.apply(this, arguments);\n      }\n\n      return hasSession;\n    }()\n  }, {\n    key: \"removeAllSessions\",\n    value: function removeAllSessions() {\n      //@TODO implement removeAllSessions\n      // for (var id in this.store) {\n      //    if (id.startsWith(this.STORE_prefix + ':' + 'session' + identifier)) {\n      //       localForage.removeItem(this.STORE_prefix + ':' + id);\n      //    }\n      // }\n      return Promise.resolve();\n    }\n  }, {\n    key: \"getPreKeyBundle\",\n    value: function () {\n      var _getPreKeyBundle = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee16(address) {\n        var bundleElement, bundle;\n        return _regenerator.default.wrap(function _callee16$(_context16) {\n          while (1) {\n            switch (_context16.prev = _context16.next) {\n              case 0:\n                _context16.next = 2;\n                return this.connection.getBundle(address.getDeviceId());\n\n              case 2:\n                bundleElement = _context16.sent;\n\n                if (bundleElement) {\n                  _context16.next = 5;\n                  break;\n                }\n\n                return _context16.abrupt(\"return\", Promise.reject(\"Found no bundle\"));\n\n              case 5:\n                bundle = _bundle.Bundle.fromJSON(bundleElement); //@REVIEW registrationId??? Gajim uses probably own registration id.\n\n                return _context16.abrupt(\"return\", bundle.toSignalBundle(address.getDeviceId()));\n\n              case 7:\n              case \"end\":\n                return _context16.stop();\n            }\n          }\n        }, _callee16, this);\n      }));\n\n      function getPreKeyBundle(_x17) {\n        return _getPreKeyBundle.apply(this, arguments);\n      }\n\n      return getPreKeyBundle;\n    }()\n  }]);\n  return Store;\n}();\n\nexports.Store = Store;","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".css-19kzrtu{padding:0!important}.chat-main::-webkit-scrollbar{display:none}.invisible-scroll-bar{-ms-overflow-style:none;scrollbar-width:none}.invisible-scroll-bar::-webkit-scrollbar{display:none}.chat-main{-ms-overflow-style:none;height:89%;margin-bottom:3.5rem;overflow-y:auto;position:relative;scrollbar-width:none;z-index:100}.top-nav-chat{background:#fff;box-shadow:0 10px 60px rgba(0,0,0,.063);position:-webkit-sticky;position:sticky;top:0;z-index:1000}.message-bubble{border-radius:25px;max-width:85%;min-width:10%;text-align:left;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;word-break:break-word}.bottom-texting-bar{align-items:center;background:#fff;z-index:200}.chat-message{white-space:pre}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/components/Chat/Swiper.css\"],\"names\":[],\"mappings\":\"AAAA,aACI,mBACJ,CAGA,8BACI,YACJ,CACA,sBACI,uBAAwB,CACxB,oBACJ,CACA,yCACK,YACL,CAEA,WACI,uBAAwB,CAExB,UAAW,CAIX,oBAAqB,CAFrB,eAAgB,CADhB,iBAAkB,CAFlB,oBAAqB,CAIrB,WAEJ,CAEA,cAII,eAAgB,CAHhB,uCAA+C,CAC/C,uBAAgB,CAAhB,eAAgB,CAChB,KAAM,CAEN,YACJ,CAEA,gBAII,kBAAmB,CAFnB,aAAc,CACd,aAAc,CAGd,eAAgB,CALhB,yBAAkB,CAAlB,sBAAkB,CAAlB,iBAAkB,CAIlB,qBAEJ,CAEA,oBACI,kBAAmB,CAEnB,eAAgB,CADhB,WAEJ,CACA,cACI,eACJ\",\"sourcesContent\":[\".css-19kzrtu {\\n    padding: 0 !important;\\n}\\n\\n/* Hide scrollbar for Chrome; Safari and Opera */\\n.chat-main::-webkit-scrollbar {\\n    display: none;\\n}\\n.invisible-scroll-bar{\\n    -ms-overflow-style: none; /* IE and Edge */\\n    scrollbar-width: none; /* Firefox */\\n}\\n.invisible-scroll-bar::-webkit-scrollbar{\\n     display: none;\\n}\\n/* Hide scrollbar for IE; Edge and Firefox */\\n.chat-main {\\n    -ms-overflow-style: none; /* IE and Edge */\\n    scrollbar-width: none; /* Firefox */\\n    height: 89%;\\n    position: relative;\\n    overflow-y: auto;\\n    z-index: 100;\\n    margin-bottom: 3.5rem;\\n}\\n\\n.top-nav-chat {\\n    box-shadow: 0px 10px 60px rgba(0, 0, 0, 0.0625);\\n    position: sticky;\\n    top: 0;\\n    background: #fff;\\n    z-index: 1000;\\n}\\n\\n.message-bubble {\\n    width: fit-content;\\n    max-width: 85%;\\n    min-width: 10%;\\n    border-radius: 25px;\\n    word-break: break-word;\\n    text-align: left;\\n}\\n\\n.bottom-texting-bar {\\n    align-items: center;\\n    z-index: 200;\\n    background: #fff;\\n}\\n.chat-message{\\n    white-space: pre;\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../node_modules/postcss-loader/dist/cjs.js!./Swiper.css\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[2].use[1]!../../../node_modules/postcss-loader/dist/cjs.js!./Swiper.css\";\n       export default content && content.locals ? content.locals : undefined;\n"],"names":["_interopRequireDefault","Object","defineProperty","exports","value","ArrayBufferUtils","_classCallCheck2","_createClass2","decoder","TextDecoder","encoder","TextEncoder","chars","lookup","Uint8Array","i","length","charCodeAt","Base64ArrayBuffer","default","this","key","arraybuffer","bytes","len","base64","substring","encoded1","encoded2","encoded3","encoded4","bufferLength","p","ArrayBuffer","a","b","buffer","_len","arguments","args","Array","_key","byteLength","joined","offset","_i","set","bufferConcat","decode","s","encode","thing","dcodeIO","ByteBuffer","wrap","toString","undefined","as","bs","maxLength","Math","max","Error","min","apply","Bootstrap","_regenerator","_slicedToArray2","_asyncToGenerator2","_random","_index","_bundle","store","connection","_addDeviceIdToDeviceList","_generateSignedPreKey","_generatePreKey","_generateBundle","_prepare","mark","_callee","bundle","_context","prev","next","isReady","sent","setup","isPublished","generateBundle","t0","getDeviceId","t1","t2","toObject","publishBundle","call","put","addDeviceIdToDeviceList","stop","_this","Promise","all","generateDeviceId","KeyHelper","generateIdentityKeyPair","generateRegistrationId","then","_ref2","_callee2","_ref","_ref3","deviceId","identityKey","registrationId","_context2","_x","resolve","Random","number","pow","_callee3","preKeyPromises","preKeys","_context3","console","debug","NUM_PRE_KEYS","push","generatePreKey","generateSignedPreKey","getIdentityKeyPair","abrupt","Bundle","signedPreKey","pop","_callee4","id","preKey","_context4","storePreKey","keyPair","_x2","_callee5","identity","_context5","storeSignedPreKey","_x3","_callee6","deviceIds","ownDeviceId","_context6","getOwnDeviceList","indexOf","publishDevices","_arraybuffer","numberOfPreKeys","candidateNumber","_this$getIdentityKey","getRandomPreKey","getSignedPreKey","getIdentityKey","pubKey","keyId","publicKey","signature","_this$bundle$identity","signedPreKeyPublic","signedPreKeyId","toBase64","signedPreKeySignature","preKeyPublic","map","preKeyId","json","xmlIdentityKey","xmlSignedPreKeyPublic","xmlSignedPreKeySignature","xmlPreKeys","fromBase64","element","Connection","_toConsumableArray2","_defineProperty2","_omemo","_storage","_auth","_localforage","username","to","onMessage","resolves","channel","WebSocket","concat","replace","getAuth","send","o","JSON","stringify","disconnect","close","onopen","type","onmessage","data","msg","ownId","devices","storage","fn","lastMessage","log","parse","getItem","filter","Number","Storage","omemo","Omemo","updateDevices","prepare","decrypt","t3","from","t4","mime","warn","_decrypt","_sendMessage","message","_this$omemo","encryptedMessage","encrypt","encrypted","_x4","_this$omemo2","_this$omemo3","ownJid","storeOwnDeviceList","storeDeviceList","_this2","Device","jid","address","SignalProtocolAddress","_establishSession","_encrypt","ciphertext","sessionCipher","plaintextBuffer","_args","SessionCipher","decryptPreKeyWhisperMessage","decryptWhisperMessage","plaintext","session","hasSession","establishSession","getSession","preKeyBundle","SessionBuilder","processPreKey","signalBundle","getPreKeyBundle","processPreKeyMessage","AES_TAG_LENGTH","AES_KEY_LENGTH","AES_EXTRACTABLE","_connection","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","source","forEach","getOwnPropertyDescriptors","defineProperties","libSignal","window","libsignal","SignalConnection","date","toLocaleTimeString","hour","minute","hour12","messages","time","getTime","Date","seen","attachment","content","setItem","handleMessage","sendMessage","_this2$messages","_this2$messages2","catch","e","error","_x5","_store","_peer","_bootstrap","_stanza","deviceNumber","peers","Peer","Store","setOwnUid","_decryptWithAES","deviceList","setOwnDeviceList","identifier","setDeviceList","bootstrap","contact","getPeer","encryptedMessages","Stanza","buildEncryptedStanza","stanza","encryptedElement","encryptedData","ownPreKeyFiltered","ownPreKey","peer","exportedKey","exportedAESKey","authenticationTag","iv","ciphertextAndAuthenticationTag","parseEncryptedStanza","reject","sourceDeviceId","slice","payload","decryptWithAES","decryptedBuffer","crypto","subtle","importKey","name","tagLength","_device2","_createForOfIteratorHelper","allowArrayLike","it","Symbol","iterator","isArray","minLen","_arrayLikeToArray","n","prototype","constructor","test","_unsupportedIterableToArray","F","done","_e","f","TypeError","err","normalCompletion","didErr","step","_e2","return","arr","arr2","uid","_generateAESencryptedMessage","_generateAESKey","_encryptWithAES","remoteDeviceIds","ownDeviceIds","aes","promises","_iterator","_step","device","_iterator2","_step2","_id","_device","getDeviceList","encryptWithAES","getDevice","keydata","getOwnDevice","ownDevices","ownUid","getRandomValues","generateAESKey","generateAESencryptedMessage","exportKey","algo","keyUsage","generateKey","encryptOptions","encodedPlaintext","ciphertextLength","_x6","numberWithCSPRG","numberWithoutCSPRG","randomBuffer","Uint32Array","randomNumber","ceil","floor","random","header","sid","_key$ciphertext","rid","prekey","btoa","body","headerElement","payloadElement","keyElement","atob","_typeof2","IGNORE_KEY","BACKEND","$","ev","_ev$key","hooks","RegExp","getPrefix","oldValue","newValue","eventName","match","hook","_clear","_removeElement","_increment","_removeItem","_getItem","_setItem","join","pre_key","String","onStorageEvent","_len2","_key2","_args2","_args3","removeItem","item","_args5","grep","func","eventNameList","hasOwnProperty","startsWith","STORE_PREFIX_SESSION","STORE_PREFIX_IDENTITYKEY","STORE_PREFIX_PREKEY","STORE_PREFIX_SIGNEDPREKEY","Direction","SENDING","RECEIVING","_getPreKeyBundle","_hasSession","_loadSignedPreKey","_loadPreKey","_saveIdentity","_isTrustedIdentity","_remove","_get","_put","_getDeviceId","_isPublished","_isReady","_setDeviceList","_getDeviceList","_setOwnDeviceList","_getOwnDeviceList","get","_callee7","_context7","parseInt","_callee8","_context8","includes","_callee9","defaultValue","_context9","_x7","_x8","_callee10","_context10","_x9","_callee11","trusted","_context11","isEqual","_x10","_x11","_callee12","existing","_context12","fromString","t5","_x12","_x13","_callee13","res","_context13","privKey","_x14","remove","_callee14","_context14","_x15","record","_callee15","_context15","_x16","_callee16","bundleElement","_context16","getBundle","fromJSON","toSignalBundle","_x17","___CSS_LOADER_EXPORT___","module","options","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement"],"sourceRoot":""}