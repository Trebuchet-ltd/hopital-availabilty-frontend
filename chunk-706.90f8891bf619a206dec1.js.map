{"version":3,"file":"chunk-706.90f8891bf619a206dec1.js","mappings":"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","sources":["webpack://hopital-availabilty-frontend/./node_modules/@mui/icons-material/Https.js","webpack://hopital-availabilty-frontend/./node_modules/@mui/icons-material/KeyboardArrowDown.js","webpack://hopital-availabilty-frontend/./src/components/VideoCall/WebRTC.ts","webpack://hopital-availabilty-frontend/./src/components/VideoCall/constants.ts","webpack://hopital-availabilty-frontend/./src/components/VideoCall/event.ts","webpack://hopital-availabilty-frontend/./src/components/VideoCall/index.tsx"],"sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z\"\n}), 'Https');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z\"\n}), 'KeyboardArrowDown');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _constants = require(\"./constants\");\n\nvar _auth = require(\"../../api/auth\");\n\nvar _event = require(\"./event\");\n\nvar WebRTC = /*#__PURE__*/function () {\n  function WebRTC(token, to, localVideo, remoteVideo, remoteAudio, notifyUser) {\n    var _this = this;\n\n    (0, _classCallCheck2.default)(this, WebRTC);\n    (0, _defineProperty2.default)(this, \"mediaStream\", new MediaStream());\n    (0, _defineProperty2.default)(this, \"media\", new Media());\n    (0, _defineProperty2.default)(this, \"connected\", false);\n    (0, _defineProperty2.default)(this, \"makingOffer\", false);\n    (0, _defineProperty2.default)(this, \"polite\", false);\n    this.localVideo = localVideo;\n    this.remoteVideo = remoteVideo;\n    this.remoteAudio = remoteAudio;\n    this.notifyUser = notifyUser;\n    var metadata = {\n      token: token,\n      to: to\n    };\n    var socket = new WebSocket(_constants.WEBSOCKET_URL + (0, _auth.getAuth)());\n    var opened = new Promise(function (resolve) {\n      return socket.onopen = function () {\n        socket.send(JSON.stringify({\n          type: _constants.TYPE_REGISTER,\n          metadata: metadata\n        }));\n        resolve();\n      };\n    });\n\n    socket.onmessage = function (_ref) {\n      var data = _ref.data;\n      console.log(JSON.parse(data), \"recieved\");\n\n      _this.onMessage(JSON.parse(data));\n    };\n\n    this.send = function (type, data) {\n      return opened.then(function () {\n        socket.send(JSON.stringify({\n          type: type,\n          data: data,\n          metadata: metadata\n        }));\n        console.log({\n          type: type,\n          data: data,\n          metadata: metadata\n        }, \"sent\");\n      });\n    };\n\n    this.peer = new RTCPeerConnection({\n      iceServers: _constants.DEFAULT_ICE_SERVERS\n    });\n    this.peerReady = new Promise(function (resolve) {\n      return _this.peer.onnegotiationneeded = resolve;\n    });\n\n    this.peer.onicecandidate = function (_ref2) {\n      var candidate = _ref2.candidate;\n      return candidate && _this.send(_constants.TYPE_ICECANDIDATE, candidate);\n    };\n\n    this.peer.ontrack = function (_ref3) {\n      var streams = _ref3.streams;\n      console.log(\"got stream\", streams[0]);\n\n      if (streams[0]) {\n        _this.remoteAudio.srcObject = new MediaStream([streams[0].getAudioTracks()[0]]);\n        _this.remoteVideo.srcObject = new MediaStream([streams[0].getVideoTracks()[0]]);\n      }\n    };\n\n    this.media.on(\"newStream\", function (type) {\n      return _this.handleTrackFromMedia(type);\n    });\n    this.setUpMedia();\n\n    socket.onclose = this.tearDown = function () {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      console.log(args[0]);\n\n      _this.media.end();\n\n      socket.close();\n\n      _this.peer.close();\n    };\n\n    this.peer.addEventListener(\"connectionstatechange\", function (event) {\n      console.log(_this.peer.connectionState);\n\n      if (_this.peer.connectionState === \"connected\") {\n        _this.connected = true;\n        console.log(\"yaay connected\");\n      } else _this.connected = false;\n    });\n  }\n\n  (0, _createClass2.default)(WebRTC, [{\n    key: \"makeCall\",\n    value: function () {\n      var _makeCall = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee() {\n        var _this2 = this;\n\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.peer.addEventListener(\"negotiationneeded\", function () {\n                  return _this2.createOffer();\n                });\n                this.createOffer();\n                this.polite = true;\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function makeCall() {\n        return _makeCall.apply(this, arguments);\n      }\n\n      return makeCall;\n    }()\n  }, {\n    key: \"createOffer\",\n    value: function () {\n      var _createOffer = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        var offer;\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                this.makingOffer = true;\n                _context2.next = 4;\n                return this.peer.createOffer();\n\n              case 4:\n                offer = _context2.sent;\n\n                if (!(this.peer.signalingState != \"stable\")) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\");\n\n              case 7:\n                _context2.next = 9;\n                return this.peer.setLocalDescription(offer);\n\n              case 9:\n                this.send(_constants.TYPE_DESCRIPTION, this.peer.localDescription);\n                _context2.next = 15;\n                break;\n\n              case 12:\n                _context2.prev = 12;\n                _context2.t0 = _context2[\"catch\"](0);\n                console.log(\"ONN \".concat(_context2.t0));\n\n              case 15:\n                _context2.prev = 15;\n                this.makingOffer = false;\n                return _context2.finish(15);\n\n              case 18:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 12, 15, 18]]);\n      }));\n\n      function createOffer() {\n        return _createOffer.apply(this, arguments);\n      }\n\n      return createOffer;\n    }()\n  }, {\n    key: \"handleDescription\",\n    value: function () {\n      var _handleDescription = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(description) {\n        var offerCollision, ignoreOffer;\n        return _regenerator.default.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!description) {\n                  _context3.next = 20;\n                  break;\n                }\n\n                offerCollision = description.type == \"offer\" && (this.makingOffer || this.peer.signalingState != \"stable\");\n                ignoreOffer = !this.polite && offerCollision;\n\n                if (!ignoreOffer) {\n                  _context3.next = 5;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\");\n\n              case 5:\n                if (!offerCollision) {\n                  _context3.next = 10;\n                  break;\n                }\n\n                _context3.next = 8;\n                return Promise.all([this.peer.setLocalDescription({\n                  type: \"rollback\"\n                }), this.peer.setRemoteDescription(description)]);\n\n              case 8:\n                _context3.next = 12;\n                break;\n\n              case 10:\n                _context3.next = 12;\n                return this.peer.setRemoteDescription(description);\n\n              case 12:\n                if (!(description.type == \"offer\")) {\n                  _context3.next = 20;\n                  break;\n                }\n\n                _context3.t0 = this.peer;\n                _context3.next = 16;\n                return this.peer.createAnswer();\n\n              case 16:\n                _context3.t1 = _context3.sent;\n                _context3.next = 19;\n                return _context3.t0.setLocalDescription.call(_context3.t0, _context3.t1);\n\n              case 19:\n                this.send(_constants.TYPE_DESCRIPTION, this.peer.localDescription);\n\n              case 20:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function handleDescription(_x) {\n        return _handleDescription.apply(this, arguments);\n      }\n\n      return handleDescription;\n    }()\n  }, {\n    key: \"setUpMedia\",\n    value: function () {\n      var _setUpMedia = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4() {\n        return _regenerator.default.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return this.media.setMediaStream(\"video\");\n\n              case 2:\n                _context4.next = 4;\n                return this.media.setMediaStream(\"audio\");\n\n              case 4:\n                this.handleTrackFromMedia(\"video\");\n                this.handleTrackFromMedia(\"audio\");\n\n              case 6:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function setUpMedia() {\n        return _setUpMedia.apply(this, arguments);\n      }\n\n      return setUpMedia;\n    }()\n  }, {\n    key: \"handleTrackFromMedia\",\n    value: function handleTrackFromMedia(type) {\n      if (type === \"video\" && this.media.videoTrack) {\n        this.videoRTCRtpSender = this.addTrack(this.media.videoTrack);\n        this.localVideo.srcObject = new MediaStream([this.media.videoTrack]);\n      }\n\n      if (type === \"audio\" && this.media.audioTrack) this.audioRTCRtpSender = this.addTrack(this.media.audioTrack);\n    }\n  }, {\n    key: \"addTrack\",\n    value: function addTrack(track) {\n      console.log(this.mediaStream, track);\n      console.log(this.peer.connectionState);\n      return this.peer.addTrack(track, this.mediaStream);\n    }\n  }, {\n    key: \"removeStream\",\n    value: function removeStream(type) {\n      if (type === \"video\" && this.videoRTCRtpSender) this.peer.removeTrack(this.videoRTCRtpSender);else if (type === \"audio\" && this.audioRTCRtpSender) this.peer.removeTrack(this.audioRTCRtpSender);\n    }\n  }, {\n    key: \"onMessage\",\n    value: function () {\n      var _onMessage = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5(_ref4) {\n        var type, data, error;\n        return _regenerator.default.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                type = _ref4.type, data = _ref4.data, error = _ref4.error;\n                console.log(type);\n                _context5.t0 = type;\n                _context5.next = _context5.t0 === _constants.TYPE_ICECANDIDATE ? 5 : _context5.t0 === _constants.TYPE_CALL_REJECT ? 8 : _context5.t0 === _constants.TYPE_DESCRIPTION ? 8 : _context5.t0 === _constants.TYPE_CALL_END ? 10 : 13;\n                break;\n\n              case 5:\n                _context5.next = 7;\n                return this.peer.addIceCandidate(data);\n\n              case 7:\n                return _context5.abrupt(\"break\", 14);\n\n              case 8:\n                this.handleDescription(data);\n                return _context5.abrupt(\"break\", 14);\n\n              case 10:\n                this.tearDown();\n                this.notifyUser(data).then();\n                return _context5.abrupt(\"break\", 14);\n\n              case 13:\n                console.warn(\"Unknown message type\", type);\n\n              case 14:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      function onMessage(_x2) {\n        return _onMessage.apply(this, arguments);\n      }\n\n      return onMessage;\n    }()\n  }]);\n  return WebRTC;\n}();\n\nexports.default = WebRTC;\n\nvar Media = /*#__PURE__*/function () {\n  function Media() {\n    (0, _classCallCheck2.default)(this, Media);\n    (0, _defineProperty2.default)(this, \"deniedSources\", {});\n    (0, _defineProperty2.default)(this, \"emitter\", new _event.Events());\n    (0, _defineProperty2.default)(this, \"devices\", {});\n  }\n\n  (0, _createClass2.default)(Media, [{\n    key: \"setMediaStream\",\n    value: function () {\n      var _setMediaStream = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(type) {\n        var _this3 = this;\n\n        return _regenerator.default.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!(type === \"video\")) {\n                  _context6.next = 8;\n                  break;\n                }\n\n                _context6.next = 3;\n                return this.getTrack(\"video\", this.devices[\"video\"]);\n\n              case 3:\n                this.videoTrack = _context6.sent;\n\n                if (this.videoTrack) {\n                  this.videoTrack.addEventListener(\"ended\", function () {\n                    delete _this3.videoTrack;\n\n                    _this3.emitter.emit(\"videoToggle\", false);\n\n                    _this3.emitter.emit(\"streamEnd\", \"video\");\n                  });\n                  this.emitter.emit(\"videoToggle\", true);\n                }\n\n                return _context6.abrupt(\"return\", this.videoTrack);\n\n              case 8:\n                if (!(type === \"audio\")) {\n                  _context6.next = 14;\n                  break;\n                }\n\n                _context6.next = 11;\n                return this.getTrack(\"audio\", this.devices[\"audio\"]);\n\n              case 11:\n                this.audioTrack = _context6.sent;\n\n                if (this.audioTrack) {\n                  this.audioTrack.addEventListener(\"ended\", function () {\n                    delete _this3.videoTrack;\n\n                    _this3.emitter.emit(\"audioToggle\", false);\n\n                    _this3.emitter.emit(\"streamEnd\", \"audio\");\n                  });\n                  this.emitter.emit(\"audioToggle\", true);\n                }\n\n                return _context6.abrupt(\"return\", this.audioTrack);\n\n              case 14:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this);\n      }));\n\n      function setMediaStream(_x3) {\n        return _setMediaStream.apply(this, arguments);\n      }\n\n      return setMediaStream;\n    }()\n  }, {\n    key: \"on\",\n    value: function on(event, callback) {\n      return this.emitter.on(event, callback);\n    }\n  }, {\n    key: \"getTrack\",\n    value: function () {\n      var _getTrack = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(type, devId) {\n        var stream;\n        return _regenerator.default.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                _context7.prev = 0;\n                _context7.next = 3;\n                return navigator.mediaDevices.getUserMedia((0, _defineProperty2.default)({}, type, devId ? {\n                  deviceId: {\n                    exact: devId\n                  }\n                } : true));\n\n              case 3:\n                stream = _context7.sent;\n                if (this.deniedSources[type]) this.deniedSources[type] = false;\n                return _context7.abrupt(\"return\", stream.getTracks()[0]);\n\n              case 8:\n                _context7.prev = 8;\n                _context7.t0 = _context7[\"catch\"](0);\n\n                if (!(_context7.t0.name === \"NotAllowedError\" || _context7.t0.name == \"SecurityError\")) {\n                  _context7.next = 15;\n                  break;\n                }\n\n                this.deniedSources[type] = true;\n                this.emitter.emit(\"permissionDenied\", type);\n                _context7.next = 16;\n                break;\n\n              case 15:\n                throw _context7.t0;\n\n              case 16:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this, [[0, 8]]);\n      }));\n\n      function getTrack(_x4, _x5) {\n        return _getTrack.apply(this, arguments);\n      }\n\n      return getTrack;\n    }()\n  }, {\n    key: \"toggleCamera\",\n    value: function () {\n      var _toggleCamera = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8(state) {\n        return _regenerator.default.wrap(function _callee8$(_context8) {\n          while (1) {\n            switch (_context8.prev = _context8.next) {\n              case 0:\n                if (!this.videoTrack) {\n                  _context8.next = 5;\n                  break;\n                }\n\n                this.videoTrack.enabled = state;\n                this.emitter.emit(\"videoToggle\", state);\n                _context8.next = 10;\n                break;\n\n              case 5:\n                _context8.next = 7;\n                return this.setMediaStream(\"video\");\n\n              case 7:\n                if (!_context8.sent) {\n                  _context8.next = 10;\n                  break;\n                }\n\n                this.emitter.emit(\"newStream\", \"video\");\n                this.emitter.emit(\"videoToggle\", true);\n\n              case 10:\n              case \"end\":\n                return _context8.stop();\n            }\n          }\n        }, _callee8, this);\n      }));\n\n      function toggleCamera(_x6) {\n        return _toggleCamera.apply(this, arguments);\n      }\n\n      return toggleCamera;\n    }()\n  }, {\n    key: \"toggleMic\",\n    value: function () {\n      var _toggleMic = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9(state) {\n        return _regenerator.default.wrap(function _callee9$(_context9) {\n          while (1) {\n            switch (_context9.prev = _context9.next) {\n              case 0:\n                if (!this.audioTrack) {\n                  _context9.next = 5;\n                  break;\n                }\n\n                this.audioTrack.enabled = state;\n                this.emitter.emit(\"audioToggle\", state);\n                _context9.next = 10;\n                break;\n\n              case 5:\n                _context9.next = 7;\n                return this.setMediaStream(\"audio\");\n\n              case 7:\n                if (!_context9.sent) {\n                  _context9.next = 10;\n                  break;\n                }\n\n                this.emitter.emit(\"newStream\", \"audio\");\n                this.emitter.emit(\"audioToggle\", true);\n\n              case 10:\n              case \"end\":\n                return _context9.stop();\n            }\n          }\n        }, _callee9, this);\n      }));\n\n      function toggleMic(_x7) {\n        return _toggleMic.apply(this, arguments);\n      }\n\n      return toggleMic;\n    }()\n  }, {\n    key: \"end\",\n    value: function end() {\n      var _this$videoTrack, _this$audioTrack;\n\n      (_this$videoTrack = this.videoTrack) === null || _this$videoTrack === void 0 ? void 0 : _this$videoTrack.stop();\n      (_this$audioTrack = this.audioTrack) === null || _this$audioTrack === void 0 ? void 0 : _this$audioTrack.stop();\n      delete this.audioTrack;\n      delete this.videoTrack;\n    }\n  }]);\n  return Media;\n}();","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WEBSOCKET_URL = exports.TYPE_REGISTER = exports.TYPE_OFFER = exports.TYPE_ICECANDIDATE = exports.TYPE_DESCRIPTION = exports.TYPE_CALL_REJECT = exports.TYPE_CALL_END = exports.TYPE_ANSWER = exports.DEFAULT_ICE_SERVERS = exports.DEFAULT_CONSTRAINTS = void 0;\n\nvar _process$env$BASE_URL;\n\nvar DEFAULT_CONSTRAINTS = {\n  video: true,\n  audio: true\n};\nexports.DEFAULT_CONSTRAINTS = DEFAULT_CONSTRAINTS;\nvar DEFAULT_ICE_SERVERS = [{\n  urls: \"stun:stun.l.google.com:19302\"\n}];\nexports.DEFAULT_ICE_SERVERS = DEFAULT_ICE_SERVERS;\nvar WEBSOCKET_URL = \"\".concat((_process$env$BASE_URL = process.env.BASE_URL) === null || _process$env$BASE_URL === void 0 ? void 0 : _process$env$BASE_URL.replace(\"http\", \"ws\"), \"/ws/chat/webrtc?token=\");\nexports.WEBSOCKET_URL = WEBSOCKET_URL;\nvar TYPE_OFFER = \"OFFER\";\nexports.TYPE_OFFER = TYPE_OFFER;\nvar TYPE_ANSWER = \"ANSWER\";\nexports.TYPE_ANSWER = TYPE_ANSWER;\nvar TYPE_ICECANDIDATE = \"ICE CANDIDATE\";\nexports.TYPE_ICECANDIDATE = TYPE_ICECANDIDATE;\nvar TYPE_CALL_REJECT = \"REJECT CALL\";\nexports.TYPE_CALL_REJECT = TYPE_CALL_REJECT;\nvar TYPE_REGISTER = \"REGISTER\";\nexports.TYPE_REGISTER = TYPE_REGISTER;\nvar TYPE_CALL_END = \"END CALL\";\nexports.TYPE_CALL_END = TYPE_CALL_END;\nvar TYPE_DESCRIPTION = \"DESCRIPTION\";\nexports.TYPE_DESCRIPTION = TYPE_DESCRIPTION;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Events = void 0;\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar Events = /*#__PURE__*/function () {\n  function Events() {\n    (0, _classCallCheck2.default)(this, Events);\n    (0, _defineProperty2.default)(this, \"events\", {});\n  }\n\n  (0, _createClass2.default)(Events, [{\n    key: \"emit\",\n    value: function emit(event) {\n      var callbacks = this.events[event] || [];\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      for (var i = 0, length = callbacks.length; i < length; i++) {\n        callbacks[i].apply(callbacks, args);\n      }\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, cb) {\n      var _this$events$event,\n          _this = this;\n\n      ((_this$events$event = this.events[event]) === null || _this$events$event === void 0 ? void 0 : _this$events$event.push(cb)) || (this.events[event] = [cb]);\n      return function () {\n        var _this$events$event2;\n\n        _this.events[event] = (_this$events$event2 = _this.events[event]) === null || _this$events$event2 === void 0 ? void 0 : _this$events$event2.filter(function (i) {\n          return cb !== i;\n        });\n      };\n    }\n  }]);\n  return Events;\n}();\n\nexports.Events = Events;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _assertThisInitialized2 = _interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));\n\nvar _get2 = _interopRequireDefault(require(\"@babel/runtime/helpers/get\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime/helpers/defineProperty\"));\n\nvar _react = require(\"@emotion/react\");\n\nvar _styles = require(\"@mui/material/styles\");\n\nvar _colors = require(\"@mui/material/colors\");\n\nvar _Box = _interopRequireDefault(require(\"@mui/material/Box\"));\n\nvar _KeyboardArrowDown = _interopRequireDefault(require(\"@mui/icons-material/KeyboardArrowDown\"));\n\nvar _Https = _interopRequireDefault(require(\"@mui/icons-material/Https\"));\n\nvar _auth = require(\"../../api/auth\");\n\nvar _reactRouter = require(\"react-router\");\n\nvar _Avatar = _interopRequireDefault(require(\"@mui/material/Avatar\"));\n\nvar _reactRouterDom = require(\"react-router-dom\");\n\nvar _WebRTC = _interopRequireDefault(require(\"./WebRTC\"));\n\nvar _react2 = _interopRequireDefault(require(\"react\"));\n\nvar _material = require(\"@mui/material\");\n\nvar _styles2 = require(\"@mui/styles\");\n\nvar _jsxRuntime = require(\"react/jsx-runtime\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nvar StyledBox = (0, _styles.styled)(_Box.default)(function (_ref) {\n  var theme = _ref.theme;\n  return {\n    backgroundColor: theme.palette.mode === \"light\" ? \"#083CBE\" : _colors.grey[800]\n  };\n});\nvar Button = (0, _styles2.withStyles)(function (theme) {\n  return {\n    root: {\n      color: \"white\"\n    }\n  };\n})(_material.Button);\n\nvar VideoCallLoc = /*#__PURE__*/function (_ref2) {\n  (0, _inherits2.default)(VideoCallLoc, _ref2);\n\n  var _super = _createSuper(VideoCallLoc);\n\n  function VideoCallLoc(props) {\n    var _this$state$user, _this$state$user$frie, _this$state$user2;\n\n    var _this;\n\n    (0, _classCallCheck2.default)(this, VideoCallLoc);\n    _this = _super.call(this, props);\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"localVideo\", /*#__PURE__*/_react2.default.createRef());\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"remoteVideo\", /*#__PURE__*/_react2.default.createRef());\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"remoteAudio\", /*#__PURE__*/_react2.default.createRef());\n    (0, _defineProperty2.default)((0, _assertThisInitialized2.default)(_this), \"notifyUser\", /*#__PURE__*/function () {\n      var _ref3 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(msg) {\n        var setState;\n        return _regenerator.default.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                window.alert(msg);\n                setState = _this.setState.bind((0, _assertThisInitialized2.default)(_this));\n                return _context.abrupt(\"return\", new Promise(function (acceptCall) {\n                  return setState({\n                    acceptCall: acceptCall\n                  });\n                }));\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref3.apply(this, arguments);\n      };\n    }());\n    console.log(_this.props.match.params);\n    var chatUser = (_this$state$user = _this.state.user) === null || _this$state$user === void 0 ? void 0 : (_this$state$user$frie = _this$state$user.friends) === null || _this$state$user$frie === void 0 ? void 0 : _this$state$user$frie.find(function (friend) {\n      return friend.token === _this.props.match.params.chatId;\n    });\n    if (!chatUser || !((_this$state$user2 = _this.state.user) !== null && _this$state$user2 !== void 0 && _this$state$user2.tokens.private_token)) _this.props.history.replace(\"/chat\");else _this.state = _objectSpread(_objectSpread({}, _this.state), {}, {\n      openStatus: false,\n      chatUser: chatUser,\n      video: {\n        enabled: false,\n        denied: false\n      },\n      audio: {\n        enabled: false,\n        denied: false\n      }\n    });\n    return _this;\n  }\n\n  (0, _createClass2.default)(VideoCallLoc, [{\n    key: \"componentDidMount\",\n    value: function () {\n      var _componentDidMount = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2() {\n        var _this$state$user3,\n            _this$state$user3$tok,\n            _this2 = this;\n\n        var _this$state$user4, _this$state$user4$tok, _this$state, rtc;\n\n        return _regenerator.default.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                (0, _get2.default)((0, _getPrototypeOf2.default)(VideoCallLoc.prototype), \"componentDidMount\", this).call(this);\n\n                if (!(!this.state.auth || !((_this$state$user3 = this.state.user) !== null && _this$state$user3 !== void 0 && (_this$state$user3$tok = _this$state$user3.tokens) !== null && _this$state$user3$tok !== void 0 && _this$state$user3$tok.private_token))) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", this.performAuth());\n\n              case 3:\n                if (this.localVideo.current && this.remoteVideo.current && this.remoteAudio.current) {\n                  rtc = new _WebRTC.default((_this$state$user4 = this.state.user) === null || _this$state$user4 === void 0 ? void 0 : (_this$state$user4$tok = _this$state$user4.tokens) === null || _this$state$user4$tok === void 0 ? void 0 : _this$state$user4$tok.private_token, (_this$state = this.state) === null || _this$state === void 0 ? void 0 : _this$state.chatUser.token, this.localVideo.current, this.remoteVideo.current, this.remoteAudio.current, this.notifyUser);\n                  this.setState({\n                    rtc: rtc\n                  });\n                  rtc.media.on(\"audioToggle\", function (state) {\n                    console.log(\"video\", state);\n\n                    _this2.setState({\n                      audio: {\n                        enabled: state,\n                        denied: false\n                      }\n                    });\n                  });\n                  rtc.media.on(\"videoToggle\", function (state) {\n                    console.log(\"audio\", state);\n\n                    _this2.setState({\n                      video: {\n                        enabled: state,\n                        denied: false\n                      }\n                    });\n                  });\n                  rtc.media.on(\"permissionDenied\", function (type) {\n                    console.log(type + \" denied\");\n                    if (type === \"video\") _this2.setState({\n                      video: {\n                        enabled: false,\n                        denied: true\n                      }\n                    });else if (type === \"audio\") _this2.setState({\n                      video: {\n                        enabled: false,\n                        denied: true\n                      }\n                    });\n                  });\n                }\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }()\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      (0, _get2.default)((0, _getPrototypeOf2.default)(VideoCallLoc.prototype), \"componentWillUnmount\", this).call(this);\n      this.state.rtc.tearDown();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log(this.state.video, this.state.audio);\n      return /*#__PURE__*/(0, _jsxRuntime.jsx)(_jsxRuntime.Fragment, {\n        children: /*#__PURE__*/(0, _jsxRuntime.jsxs)(\"div\", {\n          style: {\n            zIndex: 50,\n            height: \"100%\",\n            color: \"#8DB5B4\",\n            backgroundColor: \"#3E64FF\"\n          },\n          children: [/*#__PURE__*/(0, _jsxRuntime.jsxs)(\"div\", {\n            style: {\n              padding: \"1rem\"\n            },\n            className: \"d-flex justify-content-center align-items-center\",\n            children: [/*#__PURE__*/(0, _jsxRuntime.jsx)(_reactRouterDom.Link, {\n              style: {\n                textDecoration: \"none\"\n              },\n              to: \"/chat/\".concat(this.state.chatUser.token),\n              children: /*#__PURE__*/(0, _jsxRuntime.jsx)(_KeyboardArrowDown.default, {\n                color: \"error\"\n              })\n            }), /*#__PURE__*/(0, _jsxRuntime.jsx)(_Https.default, {\n              style: {\n                height: \"1rem\"\n              }\n            }), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"p\", {\n              className: \"m-0\",\n              children: \"End-to-end encrypted\"\n            })]\n          }), 0 ? /*#__PURE__*/(0, _jsxRuntime.jsxs)(\"div\", {\n            style: {\n              color: \"#F0F0F0\"\n            },\n            children: [/*#__PURE__*/(0, _jsxRuntime.jsx)(_Avatar.default, {\n              src: this.state.chatUser.profile,\n              alt: this.state.chatUser.name\n            }), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"h3\", {\n              className: \"mt-3\",\n              children: this.state.chatUser.name\n            }), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"p\", {\n              children: \"Calling\"\n            })]\n          }) : /*#__PURE__*/(0, _jsxRuntime.jsxs)(_jsxRuntime.Fragment, {\n            children: [/*#__PURE__*/(0, _jsxRuntime.jsx)(\"video\", {\n              ref: this.localVideo,\n              muted: true,\n              autoPlay: true\n            }), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"video\", {\n              ref: this.remoteVideo,\n              autoPlay: true,\n              playsInline: true\n            }), /*#__PURE__*/(0, _jsxRuntime.jsx)(\"audio\", {\n              ref: this.remoteAudio,\n              autoPlay: true\n            }), /*#__PURE__*/(0, _jsxRuntime.jsxs)(\"div\", {\n              style: {\n                marginBottom: \"40px\"\n              },\n              children: [/*#__PURE__*/(0, _jsxRuntime.jsx)(Button, {\n                onClick: function onClick() {\n                  return _this3.state.rtc.makeCall();\n                },\n                children: \"Call\"\n              }), /*#__PURE__*/(0, _jsxRuntime.jsx)(Button, {\n                onClick: function onClick() {\n                  return _this3.state.rtc.media.toggleCamera(!_this3.state.video.enabled);\n                },\n                children: \"Video \" + (this.state.video.enabled ? \"On\" : \"Off\")\n              }), /*#__PURE__*/(0, _jsxRuntime.jsx)(Button, {\n                onClick: function onClick() {\n                  return _this3.state.rtc.media.toggleMic(!_this3.state.audio.enabled);\n                },\n                children: \"Audio \" + (this.state.audio.enabled ? \"On\" : \"Off\")\n              }), /*#__PURE__*/(0, _jsxRuntime.jsx)(Button, {\n                onClick: function onClick() {\n                  return _this3.state.acceptCall(true);\n                },\n                children: \"Accept\"\n              }), /*#__PURE__*/(0, _jsxRuntime.jsx)(Button, {\n                onClick: function onClick() {\n                  return _this3.state.acceptCall(false);\n                },\n                children: \"Reject\"\n              }), /*#__PURE__*/(0, _jsxRuntime.jsx)(Button, {\n                onClick: function onClick() {\n                  return _this3.state.rtc.tearDown();\n                },\n                children: \"Stop\"\n              })]\n            }), /*#__PURE__*/(0, _jsxRuntime.jsx)(_react.Global, {\n              styles: {\n                \".MuiDrawer-root > .MuiPaper-root\": {\n                  height: \"10%\",\n                  overflow: \"visible\"\n                }\n              }\n            })]\n          })]\n        })\n      });\n    }\n  }]);\n  return VideoCallLoc;\n}(_auth.AuthComponent);\n\nvar _default = (0, _reactRouter.withRouter)(VideoCallLoc);\n\nexports.default = _default;"],"names":["_interopRequireDefault","Object","defineProperty","exports","value","_createSvgIcon","_jsxRuntime","_default","default","jsx","d","_regenerator","_asyncToGenerator2","_classCallCheck2","_createClass2","_defineProperty2","_constants","_auth","_event","WebRTC","token","to","localVideo","remoteVideo","remoteAudio","notifyUser","_this","this","MediaStream","Media","metadata","socket","WebSocket","WEBSOCKET_URL","getAuth","opened","Promise","resolve","onopen","send","JSON","stringify","type","TYPE_REGISTER","onmessage","_ref","data","console","log","parse","onMessage","then","peer","RTCPeerConnection","iceServers","DEFAULT_ICE_SERVERS","peerReady","onnegotiationneeded","onicecandidate","_ref2","candidate","TYPE_ICECANDIDATE","ontrack","_ref3","streams","srcObject","getAudioTracks","getVideoTracks","media","on","handleTrackFromMedia","setUpMedia","onclose","tearDown","_len","arguments","length","args","Array","_key","end","close","addEventListener","event","connectionState","connected","_onMessage","_setUpMedia","_handleDescription","_createOffer","_makeCall","key","mark","_callee","_this2","wrap","_context","prev","next","createOffer","polite","stop","apply","_callee2","offer","_context2","makingOffer","sent","signalingState","abrupt","setLocalDescription","TYPE_DESCRIPTION","localDescription","t0","concat","finish","_callee3","description","offerCollision","_context3","all","setRemoteDescription","createAnswer","t1","call","_x","_callee4","_context4","setMediaStream","videoTrack","videoRTCRtpSender","addTrack","audioTrack","audioRTCRtpSender","track","mediaStream","removeTrack","_callee5","_ref4","_context5","error","TYPE_CALL_REJECT","TYPE_CALL_END","addIceCandidate","handleDescription","warn","_x2","Events","_toggleMic","_toggleCamera","_getTrack","_setMediaStream","_callee6","_this3","_context6","getTrack","devices","emitter","emit","_x3","callback","_callee7","devId","stream","_context7","navigator","mediaDevices","getUserMedia","deviceId","exact","deniedSources","getTracks","name","_x4","_x5","_callee8","state","_context8","enabled","_x6","_callee9","_context9","_x7","_this$videoTrack","_this$audioTrack","TYPE_OFFER","TYPE_ANSWER","DEFAULT_CONSTRAINTS","video","audio","urls","replace","callbacks","events","i","cb","_this$events$event","push","_this$events$event2","filter","_assertThisInitialized2","_get2","_inherits2","_possibleConstructorReturn2","_getPrototypeOf2","_react","_styles","_colors","_Box","_KeyboardArrowDown","_Https","_reactRouter","_reactRouterDom","_WebRTC","_react2","_material","_styles2","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","source","forEach","getOwnPropertyDescriptors","defineProperties","styled","backgroundColor","theme","palette","mode","grey","Button","withStyles","root","color","VideoCallLoc","_componentDidMount","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","Boolean","prototype","valueOf","e","_isNativeReflectConstruct","result","Super","NewTarget","constructor","props","_this$state$user","_this$state$user$frie","_this$state$user2","createRef","msg","setState","window","alert","bind","acceptCall","match","params","chatUser","user","friends","find","friend","chatId","tokens","private_token","openStatus","denied","history","_this$state$user3","_this$state$user3$tok","_this$state$user4","_this$state$user4$tok","_this$state","rtc","auth","performAuth","current","Fragment","children","jsxs","style","zIndex","height","padding","className","Link","textDecoration","ref","muted","autoPlay","playsInline","marginBottom","onClick","makeCall","toggleCamera","toggleMic","Global","styles","overflow","AuthComponent","withRouter"],"sourceRoot":""}